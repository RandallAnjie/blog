<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhuanjier.github.io","root":"/blog/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="转接的博客备用站点">
<meta property="og:type" content="website">
<meta property="og:title" content="转接的博客">
<meta property="og:url" content="https://zhuanjier.github.io/blog/page/3/index.html">
<meta property="og:site_name" content="转接的博客">
<meta property="og:description" content="转接的博客备用站点">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="转接">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://zhuanjier.github.io/blog/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>转接的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">转接的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/02/23/mingw-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/02/23/mingw-install/" class="post-title-link" itemprop="url">MinGW环境安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-23 21:28:55" itemprop="dateCreated datePublished" datetime="2022-02-23T21:28:55+08:00">2022-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>在<a target="_blank" rel="noopener" href="https://sourceforge.net/projects/mingw-w64/files/">sourceforge仓库（https://sourceforge.net/projects/mingw-w64/files/）</a>下载文件</p>
<p>下载列表如下：</p>
<p><strong>MinGW-W64 GCC-8.1.0</strong><br>x86_64-posix-sjlj<br>x86_64-posix-seh<br>x86_64-win32-sjlj<br>x86_64-win32-seh<br>i686-posix-sjlj<br>i686-posix-dwarf<br>i686-win32-sjlj<br>i686-win32-dwarf</p>
<p>前4个为64位，后四个为32位。其中posix为一般使用，win32为运行Windows程序</p>
<h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p>将下载的压缩包解压，并且获取<strong>其内bin文件夹的地址</strong>，如：C:\Program Files\mingw64\bin</p>
<p>此电脑（右键）——属性——系统——高级系统设置——系统属性——环境变量</p>
<p>将地址加入系统变量的<strong>Path</strong>变量后</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.22000.493]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">C:\Users\zhuan&gt;gcc -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=C:/Program\ Files/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/8.1.0/lto-wrapper.exe</span><br><span class="line">Target: x86_64-w64-mingw32</span><br><span class="line">Configured with: ../../../src/gcc-8.1.0/configure --host=x86_64-w64-mingw32 --build=x86_64-w64-mingw32 --target=x86_64-w64-mingw32 --prefix=/mingw64 --with-sysroot=/c/mingw810/x86_64-810-posix-seh-rt_v6-rev0/mingw64 --enable-shared --enable-static --disable-multilib --enable-languages=c,c++,fortran,lto --enable-libstdcxx-time=yes --enable-threads=posix --enable-libgomp --enable-libatomic --enable-lto --enable-graphite --enable-checking=release --enable-fully-dynamic-string --enable-version-specific-runtime-libs --disable-libstdcxx-pch --disable-libstdcxx-debug --enable-bootstrap --disable-rpath --disable-win32-registry --disable-nls --disable-werror --disable-symvers --with-gnu-as --with-gnu-ld --with-arch=nocona --with-tune=core2 --with-libiconv --with-system-zlib --with-gmp=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-mpfr=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-mpc=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-isl=/c/mingw810/prerequisites/x86_64-w64-mingw32-static --with-pkgversion=&#x27;x86_64-posix-seh-rev0, Built by MinGW-W64 project&#x27; --with-bugurl=https://sourceforge.net/projects/mingw-w64 CFLAGS=&#x27;-O2 -pipe -fno-ident -I/c/mingw810/x86_64-810-posix-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include&#x27; CXXFLAGS=&#x27;-O2 -pipe -fno-ident -I/c/mingw810/x86_64-810-posix-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include&#x27; CPPFLAGS=&#x27; -I/c/mingw810/x86_64-810-posix-seh-rt_v6-rev0/mingw64/opt/include -I/c/mingw810/prerequisites/x86_64-zlib-static/include -I/c/mingw810/prerequisites/x86_64-w64-mingw32-static/include&#x27; LDFLAGS=&#x27;-pipe -fno-ident -L/c/mingw810/x86_64-810-posix-seh-rt_v6-rev0/mingw64/opt/lib -L/c/mingw810/prerequisites/x86_64-zlib-static/lib -L/c/mingw810/prerequisites/x86_64-w64-mingw32-static/lib &#x27;</span><br><span class="line">Thread model: posix</span><br><span class="line">gcc version 8.1.0 (x86_64-posix-seh-rev0, Built by MinGW-W64 project)</span><br><span class="line"></span><br><span class="line">C:\Users\zhuan&gt;</span><br></pre></td></tr></table></figure>

<p>成功输出版本信息8.1.0</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/02/23/jdk-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/02/23/jdk-install/" class="post-title-link" itemprop="url">JDK安装以及环境变量配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-23 21:07:25" itemprop="dateCreated datePublished" datetime="2022-02-23T21:07:25+08:00">2022-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="下载JDK"><a href="#下载JDK" class="headerlink" title="下载JDK"></a>下载JDK</h2><p>打开<a target="_blank" rel="noopener" href="https://www.oracle.com/cn/java/">Oracle官网https://www.oracle.com/cn/java/</a></p>
<p>选择立即下载java跳转下载界面，选择对应的版本后下载jdk</p>
<h3 id="64位Windows："><a href="#64位Windows：" class="headerlink" title="64位Windows："></a>64位Windows：</h3><p>jdk17下载链接：<a target="_blank" rel="noopener" href="https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.exe">https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.exe</a></p>
<h3 id="64位Ubuntu（基于树莓派）："><a href="#64位Ubuntu（基于树莓派）：" class="headerlink" title="64位Ubuntu（基于树莓派）："></a>64位Ubuntu（基于树莓派）：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:~$ mkdir jdk</span><br><span class="line">ubuntu@ubuntu:~$ cd jdk</span><br><span class="line">ubuntu@ubuntu:~/jdk$ wget https://download.oracle.com/java/17/latest/jdk-17_linux-aarch64_bin.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h2><h3 id="Windows："><a href="#Windows：" class="headerlink" title="Windows："></a>Windows：</h3><p>打开安装程序，<strong>复制安装路径</strong>如：*<em>C:\Program Files\Java\jdk-17.0.2\*</em></p>
<h3 id="Ubuntu："><a href="#Ubuntu：" class="headerlink" title="Ubuntu："></a>Ubuntu：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:~/jdk$ sudo tar -zxvf jdk-17_linux-aarch64_bin.tar.gz</span><br></pre></td></tr></table></figure>

<p>需要记住解压路径</p>
<h2 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h2><h3 id="Windows：-1"><a href="#Windows：-1" class="headerlink" title="Windows："></a>Windows：</h3><p>此电脑（右键）——属性——系统——高级系统设置——系统属性——环境变量</p>
<p>在系统变量里新建<strong>变量名</strong>：<strong>JAVA_HOME</strong> <strong>变量值</strong>为安装时<strong>复制的地址</strong>：C:\Program Files\Java\jdk-17.0.2\</p>
<p>在系统变量里找到变量名为<strong>Path</strong>的变量，在末尾添加**%JAVA_HOME%bin**</p>
<h3 id="Ubuntu：-1"><a href="#Ubuntu：-1" class="headerlink" title="Ubuntu："></a>Ubuntu：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:~/jdk$ sudo vim /etc/profile</span><br></pre></td></tr></table></figure>

<p>在末尾添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/home/ubuntu/java/jdk/jdk-17.0.2/ # 值为解压路径</span><br><span class="line">CLASSPATH=$JAVA_HOME/lib/</span><br><span class="line">PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure>

<p>保存并退出，并且更新源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:~/jdk$ source /etc/profile</span><br></pre></td></tr></table></figure>

<h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><h3 id="Windows：-2"><a href="#Windows：-2" class="headerlink" title="Windows："></a>Windows：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.22000.493]</span><br><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">C:\Users\zhuan&gt;java -version</span><br><span class="line">java version &quot;17.0.2&quot; 2022-01-18 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)</span><br><span class="line"></span><br><span class="line">C:\Users\zhuan&gt;javac -version</span><br><span class="line">javac 17.0.2</span><br><span class="line"></span><br><span class="line">C:\Users\zhuan&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Ubuntu：-2"><a href="#Ubuntu：-2" class="headerlink" title="Ubuntu："></a>Ubuntu：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ubuntu:~/jdk$ java -version</span><br><span class="line">java version &quot;17.0.2&quot; 2022-01-18 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)</span><br><span class="line">ubuntu@ubuntu:~/jdk$ javac -version</span><br><span class="line">javac 17.0.2</span><br><span class="line">ubuntu@ubuntu:~/jdk$</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/02/19/sstring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/02/19/sstring/" class="post-title-link" itemprop="url">数据结构——串</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-19 03:39:43" itemprop="dateCreated datePublished" datetime="2022-02-19T03:39:43+08:00">2022-02-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>头文件SString.h</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">// SString.h - 串</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">#define MAXLEN 255</span><br><span class="line"></span><br><span class="line">/*********************************************************************************************************************************</span><br><span class="line"> * 数据类型一览</span><br><span class="line"> * SString 定长顺序存储（静态数组）</span><br><span class="line"> * HString 串的顺序存储 可拓展长度顺序存储（指针数组）</span><br><span class="line"> * StringNode, *Node 串的链式存储</span><br><span class="line"> * </span><br><span class="line"> * 操作函数 共享栈操作在函数名后加0或者1 不带头结点的链栈操作在函数名后加WithoutFirstNode</span><br><span class="line"> * bool StrAssign(&amp;T, *ch) 赋值操作，将字符串ch复制到串T中 正常结束返回1，否则返回0</span><br><span class="line"> * bool StrCopy(&amp;T, S) 复制操作，将S串复制到串T中 正常结束返回1，否则返回0</span><br><span class="line"> * bool StrEmpty(S) 判空 空返回1，否则返回0</span><br><span class="line"> * int StrLength(S) 求长度 返回串的长度</span><br><span class="line"> * bool ClearString(S) 清空 正常结束返回1，否则返回0</span><br><span class="line"> * bool DestroyString(&amp;S) 销毁 正常结束返回1，否则返回0</span><br><span class="line"> * bool Concat(&amp;T, S1, S2) 串连接,将S1和S2连接后存入T 正常结束返回1，否则返回0</span><br><span class="line"> * bool SubString(&amp;Sub, S, pos, len) 求子串，求出串S中位于pos位置的长度为len长度的子串存入Sub 正常结束返回1，否则返回0</span><br><span class="line"> * int StrCompare(S, T) 比较操作 比较串S和T的大小，返回值小于0，等于0，大于0，分别表示S&lt;T，S=T，S&gt;T</span><br><span class="line"> * int Index(S, T) 定位操作，求出串S中第一次出现串T的位置 返回值为定位串T的位置，如果没有找到返回0</span><br><span class="line"> * int Index2(S, T) 朴素模式匹配，求出串S中第一次出现串T的位置 返回值为定位串T的位置，如果没有找到返回0</span><br><span class="line"> * void get_next(T, next) 求模式串T的next数组</span><br><span class="line"> * void get_nextval(T, nextval) 求模式串优化后的nextval数组</span><br><span class="line"> * int Index_KMP(S, T) KMP算法求出串S中第一次出现串T的位置 返回值为定位串T的位置，如果没有找到返回0</span><br><span class="line"> * </span><br><span class="line"> *********************************************************************************************************************************/</span><br><span class="line"></span><br><span class="line">// 串的顺序存储 定长顺序存储（静态数组）</span><br><span class="line">typedef struct SString&#123;</span><br><span class="line">    char ch[MAXLEN];  // 每个分量存储一个字符</span><br><span class="line">    int length;  // 串的实际长度</span><br><span class="line">&#125;SString;</span><br><span class="line"></span><br><span class="line">// 串的顺序存储 可拓展长度顺序存储（指针数组）</span><br><span class="line">typedef struct HString&#123;</span><br><span class="line">    char *ch;  // 按串长分配存储区，ch指向串的基地址</span><br><span class="line">    int length;  // 串的长度</span><br><span class="line">&#125;HString;</span><br><span class="line">//HString S; S.ch = (char *)malloc(MAXLEN*sizeof(char)); S.length = 0;</span><br><span class="line"></span><br><span class="line">// 串的链式存储</span><br><span class="line">typedef struct StringNode&#123;</span><br><span class="line">    char ch;  // 每个结点存1字符，若要提高存储密度，则可设置为多个字符数组</span><br><span class="line">    struct StringNode *next;</span><br><span class="line">&#125;StringNode, *Node;</span><br><span class="line"></span><br><span class="line">// 赋值操作</span><br><span class="line">bool StrAssign(SString &amp;T, char *ch)&#123;</span><br><span class="line">    int i = 1;</span><br><span class="line">    while(ch[i] != &#x27;\0&#x27;)&#123;</span><br><span class="line">        T.ch[i] = ch[i];</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    T.length = i;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 复制操作</span><br><span class="line">bool StrCopy(SString &amp;T, SString S)&#123;</span><br><span class="line">    int i = 1;</span><br><span class="line">    while(S.ch[i] != &#x27;\0&#x27;)&#123;</span><br><span class="line">        T.ch[i] = S.ch[i];</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    T.length = i;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空</span><br><span class="line">bool StrEmpty(SString S)&#123;</span><br><span class="line">    return S.length == 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求长度</span><br><span class="line">int StrLength(SString S)&#123;</span><br><span class="line">    return S.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 清空</span><br><span class="line">bool ClearString(SString &amp;S)&#123;</span><br><span class="line">    S.length = 0;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 销毁</span><br><span class="line">bool DestroyString(SString &amp;S)&#123;</span><br><span class="line">    S.length = 0;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 串连接</span><br><span class="line">bool Concat(SString &amp;T, SString S1, SString S2)&#123;</span><br><span class="line">    int i = 1;</span><br><span class="line">    while(S1.ch[i] != &#x27;\0&#x27;)&#123;</span><br><span class="line">        T.ch[i] = S1.ch[i];</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    while(S2.ch[i] != &#x27;\0&#x27;)&#123;</span><br><span class="line">        T.ch[i] = S2.ch[i];</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    T.length = i;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求子串</span><br><span class="line">bool SubString(SString &amp;Sub, SString S, int pos, int len)&#123;</span><br><span class="line">    if(pos &lt; 1  pos &gt; S.length  len &lt; 0  len &gt; S.length - pos + 1)&#123;  // 子串位置不合法</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    Sub.length = len;</span><br><span class="line">    for(int i = 0; i &lt; len; i++)&#123;</span><br><span class="line">        Sub.ch[i] = S.ch[pos - 1 + i];</span><br><span class="line">    &#125;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 比较操作</span><br><span class="line">int StrCompare(SString S, SString T)&#123;</span><br><span class="line">    for(int i = 0; i &lt; S.length &amp;&amp; i &lt; T.length; i++)&#123;</span><br><span class="line">        if(S.ch[i] != T.ch[i])&#123;</span><br><span class="line">            return S.ch[i]-T.ch[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return S.length - T.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 定位操作</span><br><span class="line">int Index(SString S, SString T)&#123;</span><br><span class="line">    int i = 1, n = S.length, m = T.length;</span><br><span class="line">    SString Sub;</span><br><span class="line">    while(i &lt;= n - m + 1)&#123;</span><br><span class="line">        if(SubString(Sub, S, i, m) &amp;&amp; StrCompare(Sub, T) == 0)&#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 朴素模式匹配</span><br><span class="line">int Index2(SString S, SString T)&#123;</span><br><span class="line">    int k = 1;  // 当前匹配的字符位置</span><br><span class="line">    int i = k, j = 1;</span><br><span class="line">    while(i &lt;= S.length &amp;&amp; j &lt;= T.length)&#123;</span><br><span class="line">        if(S.ch[i] == T.ch[j])&#123;</span><br><span class="line">            i++;  // 继续比较后续字符</span><br><span class="line">            j++;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            k++;  // 匹配失败，向后移动匹配字符位置</span><br><span class="line">            i = k;</span><br><span class="line">            j = 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(j &gt; T.length)&#123;</span><br><span class="line">        return k;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// KMP算法：朴素模式算法优化</span><br><span class="line">int Index_KMP_Need_Next(SString S, SString T, int next[])&#123;  // 传入next数组</span><br><span class="line">    // 例：google的next数组为next[7] = &#123;0, 0, 1, 1, 1, 2, 1&#125;</span><br><span class="line">    int i = 1, j = 1;</span><br><span class="line">    while(i &lt;= S.length &amp;&amp; j &lt;= T.length)&#123;</span><br><span class="line">        if(j == 0  S.ch[i] == T.ch[j])&#123;  // 通过j==0来判断是否是第一位不相符，然后i，j都加一以至于可以i向后移，j归为1</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(i &gt; T.length)&#123;</span><br><span class="line">        return i-T.length;        </span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求模式串T的next数组</span><br><span class="line">void get_next(SString T, int next[])&#123;</span><br><span class="line">    int i = 0, j = 0;</span><br><span class="line">    next[1] = 0;</span><br><span class="line">    while(i &lt; T.length)&#123;</span><br><span class="line">        if(j == 0  T.ch[i] == T.ch[j])&#123;</span><br><span class="line">            ++i;</span><br><span class="line">            ++j;</span><br><span class="line">            // 若pi等于pj，则next[j+1] = next[j] + 1</span><br><span class="line">            next[i] = j;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// next数组优化为nextval数组</span><br><span class="line">void get_nextval(SString T, int nextval[])&#123;</span><br><span class="line">    int *next = new int[T.length+1];</span><br><span class="line">    get_next(T, next);</span><br><span class="line">    nextval[1] = 0;</span><br><span class="line">    for(int j = 2; j &lt;=T.length; j++)&#123;</span><br><span class="line">        if(T.ch[j] == T.ch[next[j]])&#123;</span><br><span class="line">            nextval[j] = nextval[next[j]];</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            nextval[j] = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    delete[] next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// KMP算法</span><br><span class="line">int Index_KMP(SString S, SString T)&#123;</span><br><span class="line">    int i = 1, j = 1;</span><br><span class="line">    int *next = new int[T.length+1];</span><br><span class="line">    get_next(T, next);  // 求模式串T的next数组 时间复杂度O(m)</span><br><span class="line">    while(i &lt;= S.length &amp;&amp; j &lt;= T.length)&#123;  // 时间复杂度O(n)</span><br><span class="line">        if(j == 0  S.ch[i] == T.ch[j])&#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;  // 继续比较后继字符</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            j = next[j];  // 模式串向右移动</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    delete[] next;</span><br><span class="line">    if(j&gt;T.length)&#123;</span><br><span class="line">        return i-T.length;  // 匹配成功返回匹配的位置</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/02/15/stackandqueue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/02/15/stackandqueue/" class="post-title-link" itemprop="url">数据结构——栈和队列</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-15 22:46:48" itemprop="dateCreated datePublished" datetime="2022-02-15T22:46:48+08:00">2022-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>头文件StackAndQueue.h</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br></pre></td><td class="code"><pre><span class="line">// StackAndQueue.h - 栈和队列</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">#define SqStackMaxSize 10  // 定义静态链表的最大长度</span><br><span class="line">#define SqQueueMaxSize 10  // 定义顺序队列的最大长度</span><br><span class="line"></span><br><span class="line">// 数据部分用int类型数据模拟</span><br><span class="line"></span><br><span class="line">/*********************************************************************************************************************************</span><br><span class="line"> * 数据类型一览</span><br><span class="line"> * SqStack 顺序栈</span><br><span class="line"> * ShStack 共享栈</span><br><span class="line"> * LiStack 链栈</span><br><span class="line"> * SqQueue 顺序队列</span><br><span class="line"> * ShQueue 共享队列</span><br><span class="line"> * LinkQueue 链队列</span><br><span class="line"> * </span><br><span class="line"> * 操作函数 共享栈操作在函数名后加0或者1 不带头结点的链栈操作在函数名后加WithoutFirstNode</span><br><span class="line"> * int Length(S) 求栈或者队列长度 返回栈长或者队列长</span><br><span class="line"> * bool Empty(S) 判断栈S是否为空 栈空返回1，否则返回0</span><br><span class="line"> * bool Full(S) 判断栈S是否已满 栈满返回1，否则返回0</span><br><span class="line"> * int Push(S,e) 入栈，将e压入栈S 正常结束返回0，栈满，无法入栈返回-1</span><br><span class="line"> * int Pop(S,e) 出栈，将栈S的栈顶元素e出栈 正常结束返回0，栈空，无法出栈返回-1</span><br><span class="line"> * int GetTop(S,e) 获取栈S的栈顶元素e 正常结束返回0，栈空，无法获取返回-1</span><br><span class="line"> * int DestroyStack(S) 销毁栈S 正常结束返回0</span><br><span class="line"> * int PrintStack(S) 打印栈S 正常结束返回0</span><br><span class="line"> * int InitQueue(Q) 初始化队列Q 正常结束返回0</span><br><span class="line"> * int DeQueue(Q,e) 出队，将队列Q的队头元素e出队 正常结束返回0，队空，无法出队返回-1</span><br><span class="line"> * int GetHead(Q,e) 获取队列Q的队头元素e 正常结束返回0，队空，无法获取返回-1</span><br><span class="line"> * int PrintQueue(Q) 打印队列Q 正常结束返回0</span><br><span class="line"> * int DestroyQueue(Q) 销毁队列Q 正常结束返回0</span><br><span class="line"> * </span><br><span class="line"> *********************************************************************************************************************************/</span><br><span class="line"></span><br><span class="line">// 顺序栈</span><br><span class="line">typedef struct SqStack &#123;</span><br><span class="line">    int data[SqStackMaxSize];</span><br><span class="line">    int top;</span><br><span class="line">&#125; SqStack;</span><br><span class="line"></span><br><span class="line">// 初始化顺序栈</span><br><span class="line">int InitStack(SqStack &amp;S) &#123;</span><br><span class="line">    S.top = -1;  // 初始化栈顶指针为-1</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断顺序栈是否为空</span><br><span class="line">bool Empty(SqStack S) &#123;</span><br><span class="line">    return S.top == -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断顺序栈是否已满</span><br><span class="line">bool Full(SqStack S) &#123;</span><br><span class="line">    return S.top == SqStackMaxSize - 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入栈</span><br><span class="line">int Push(SqStack &amp;S, int x) &#123;</span><br><span class="line">    if (Full(S)) &#123;</span><br><span class="line">        return -1;  // 栈满，无法入栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    S.data[++S.top] = x;  // 入栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出栈</span><br><span class="line">int Pop(SqStack &amp;S, int &amp;x) &#123;</span><br><span class="line">    if (Empty(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法出栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top--];  // 出栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取栈顶元素</span><br><span class="line">int GetTop(SqStack S, int &amp;x) &#123;</span><br><span class="line">    if (Empty(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法获取栈顶元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top];  // 获取栈顶元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序栈的销毁</span><br><span class="line">int DestroyStack(SqStack &amp;S) &#123;</span><br><span class="line">    S.top = -1;  // 销毁栈，栈顶指针指向-1</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序栈的输出</span><br><span class="line">int PrintStack(SqStack S) &#123;</span><br><span class="line">    if (Empty(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt;= S.top; i++) &#123;</span><br><span class="line">        std::cout &lt;&lt; S.data[i] &lt;&lt; &quot; &quot;;  // 输出栈</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序栈的求长度</span><br><span class="line">int Length(SqStack S) &#123;</span><br><span class="line">    return S.top + 1;  // 返回栈的长度</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 共享栈</span><br><span class="line">typedef struct ShStack &#123;</span><br><span class="line">    int data[SqStackMaxSize];</span><br><span class="line">    int top0;  // 0号栈栈顶指针</span><br><span class="line">    int top1;  // 1号栈栈顶指针</span><br><span class="line">&#125; ShStack;</span><br><span class="line"></span><br><span class="line">// 初始化共享栈</span><br><span class="line">int InitStack(ShStack &amp;S) &#123;</span><br><span class="line">    S.top0 = -1;  // 初始化0号栈栈顶指针为-1</span><br><span class="line">    S.top1 = SqStackMaxSize;  // 初始化1号栈栈顶指针为栈的最大长度</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断共享栈是否为空</span><br><span class="line">bool Empty(ShStack S) &#123;</span><br><span class="line">    return S.top0 == -1 &amp;&amp; S.top1 == SqStackMaxSize;</span><br><span class="line">&#125;</span><br><span class="line">bool Empty0(ShStack S) &#123;</span><br><span class="line">    return S.top0 == -1;</span><br><span class="line">&#125;</span><br><span class="line">bool Empty1(ShStack S) &#123;</span><br><span class="line">    return S.top1 == SqStackMaxSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断共享栈是否已满</span><br><span class="line">bool Full(ShStack S) &#123;</span><br><span class="line">    return S.top1-1 == S.top0;  // 栈顶指针相邻为栈满</span><br><span class="line">&#125;</span><br><span class="line">bool Full0(ShStack S) &#123;</span><br><span class="line">    return Full(S);</span><br><span class="line">&#125;</span><br><span class="line">bool Full1(ShStack S) &#123;</span><br><span class="line">    return Full(S);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入栈</span><br><span class="line">int Push0(ShStack &amp;S, int x) &#123;</span><br><span class="line">    if (Full0(S)) &#123;</span><br><span class="line">        return -1;  // 栈满，无法入栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    S.data[++S.top0] = x;  // 入栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int Push1(ShStack &amp;S, int x) &#123;</span><br><span class="line">    if (Full1(S)) &#123;</span><br><span class="line">        return -1;  // 栈满，无法入栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    S.data[--S.top1] = x;  // 入栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出栈</span><br><span class="line">int Pop0(ShStack &amp;S, int &amp;x) &#123;</span><br><span class="line">    if (Empty0(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法出栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top0--];  // 出栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int Pop1(ShStack &amp;S, int &amp;x) &#123;</span><br><span class="line">    if (Empty1(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法出栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top1++];  // 出栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取栈顶元素</span><br><span class="line">int GetTop0(ShStack S, int &amp;x) &#123;</span><br><span class="line">    if (Empty0(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法获取栈顶元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top0];  // 获取栈顶元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int GetTop1(ShStack S, int &amp;x) &#123;</span><br><span class="line">    if (Empty1(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法获取栈顶元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = S.data[S.top1];  // 获取栈顶元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 共享栈的销毁</span><br><span class="line">int DestroyStack(ShStack &amp;S) &#123;</span><br><span class="line">    S.top0 = -1;  // 销毁0号栈，栈顶指针指向-1</span><br><span class="line">    S.top1 = SqStackMaxSize;  // 销毁1号栈，栈顶指针指向栈的最大长度</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int DestroyStack0(ShStack &amp;S) &#123;</span><br><span class="line">    S.top0 = -1;  // 销毁0号栈，栈顶指针指向-1</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int DestroyStack1(ShStack &amp;S) &#123;</span><br><span class="line">    S.top1 = SqStackMaxSize;  // 销毁1号栈，栈顶指针指向栈的最大长度</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 共享栈的输出</span><br><span class="line">int PrintStack0(ShStack S) &#123;</span><br><span class="line">    if (Empty0(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt;= S.top0; i++) &#123;</span><br><span class="line">        std::cout &lt;&lt; S.data[i] &lt;&lt; &quot; &quot;;  // 输出0号栈，输出栈顶元素</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int PrintStack1(ShStack S) &#123;</span><br><span class="line">    if (Empty1(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = SqStackMaxSize-1; i &gt; S.top1; i--) &#123;</span><br><span class="line">        std::cout &lt;&lt; S.data[i] &lt;&lt; &quot; &quot;;  // 输出1号栈，输出栈顶元素</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int PrintStack(ShStack S) &#123;</span><br><span class="line">    PrintStack0(S);</span><br><span class="line">    if (Empty1(S)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = SqStackMaxSize-1; i &gt; S.top1; i--) &#123;</span><br><span class="line">        std::cout &lt;&lt; S.data[i] &lt;&lt; &quot; &quot;;  // 输出1号栈，输出栈顶元素</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 共享栈求长度</span><br><span class="line">int StackLength0(ShStack S) &#123;</span><br><span class="line">    return S.top0+1;  // 返回0号栈的长度</span><br><span class="line">&#125;</span><br><span class="line">int StackLength1(ShStack S) &#123;</span><br><span class="line">    return SqStackMaxSize-S.top1;  // 返回1号栈的长度</span><br><span class="line">&#125;</span><br><span class="line">int StackLength(ShStack S) &#123;</span><br><span class="line">    return StackLength0(S) + StackLength1(S);  // 返回共享栈的长度</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 链栈</span><br><span class="line">typedef struct Linknode&#123;</span><br><span class="line">    int data;  // 数据域</span><br><span class="line">    struct Linknode *next;  // 指针域</span><br><span class="line">&#125;*LiStack;</span><br><span class="line"></span><br><span class="line">// 初始化链栈</span><br><span class="line">int InitStack(LiStack &amp;L) &#123;</span><br><span class="line">    L = (LiStack)malloc(sizeof(struct Linknode));  // 分配结点</span><br><span class="line">    if (L == NULL) &#123;</span><br><span class="line">        return -1;  // 分配失败，返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    L-&gt;next = NULL;  // 初始化链栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 初始化链栈 不带头结点</span><br><span class="line">int InitStackWithoutFirstNode(LiStack &amp;L) &#123;</span><br><span class="line">    L = NULL;  // 初始化链栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断链栈是否为空</span><br><span class="line">int Empty(LiStack L) &#123;</span><br><span class="line">    return L-&gt;next == NULL;  // 判断链栈是否为空</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断链栈是否空 不带头结点</span><br><span class="line">int EmptyWithoutFirstNode(LiStack L) &#123;</span><br><span class="line">    return L == NULL;  // 判断链栈是否为空</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入栈</span><br><span class="line">int Push(LiStack &amp;L, int x) &#123;</span><br><span class="line">    LiStack p = (LiStack)malloc(sizeof(struct Linknode));  // 分配结点</span><br><span class="line">    if (p == NULL) &#123;</span><br><span class="line">        return -1;  // 分配失败，返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    p-&gt;data = x;  // 入栈</span><br><span class="line">    p-&gt;next = L-&gt;next;  // 入栈</span><br><span class="line">    L-&gt;next = p;  // 入栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入栈 不带头结点</span><br><span class="line">int PushWithoutFirstNode(LiStack &amp;L, int x) &#123;</span><br><span class="line">    LiStack p = (LiStack)malloc(sizeof(struct Linknode));  // 分配结点</span><br><span class="line">    if (p == NULL) &#123;</span><br><span class="line">        return -1;  // 分配失败，返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    p-&gt;data = x;  // 入栈</span><br><span class="line">    p-&gt;next = L;  // 入栈</span><br><span class="line">    L = p;  // 入栈</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出栈</span><br><span class="line">int Pop(LiStack &amp;L, int &amp;x) &#123;</span><br><span class="line">    if (Empty(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法出栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LiStack p = L-&gt;next;  // 出栈</span><br><span class="line">    x = p-&gt;data;  // 出栈</span><br><span class="line">    L-&gt;next = p-&gt;next;  // 出栈</span><br><span class="line">    free(p);  // 释放结点</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出栈 不带头结点</span><br><span class="line">int PopWithoutFirstNode(LiStack &amp;L, int &amp;x) &#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法出栈返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LiStack p = L;  // 出栈</span><br><span class="line">    x = p-&gt;data;  // 出栈</span><br><span class="line">    L = p-&gt;next;  // 出栈</span><br><span class="line">    free(p);  // 释放结点</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出链栈</span><br><span class="line">int PrintStack(LiStack L) &#123;</span><br><span class="line">    if (Empty(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    while (L-&gt;next != NULL) &#123;</span><br><span class="line">        std::cout &lt;&lt; L-&gt;next-&gt;data &lt;&lt; &quot; &quot;;  // 输出链栈</span><br><span class="line">        L = L-&gt;next;  // 输出链栈</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出链栈 不带头结点</span><br><span class="line">int PrintStackWithoutFirstNode(LiStack L) &#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法输出返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    while (L != NULL) &#123;</span><br><span class="line">        std::cout &lt;&lt; L-&gt;data &lt;&lt; &quot; &quot;;  // 输出链栈</span><br><span class="line">        L = L-&gt;next;  // 输出链栈</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取栈顶元素</span><br><span class="line">int GetTop(LiStack L, int &amp;x) &#123;</span><br><span class="line">    if (Empty(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法获取栈顶元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = L-&gt;next-&gt;data;  // 获取栈顶元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取栈顶元素 不带头结点</span><br><span class="line">int GetTopWithoutFirstNode(LiStack L, int &amp;x) &#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法获取栈顶元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = L-&gt;data;  // 获取栈顶元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除链栈</span><br><span class="line">int DeleteStack(LiStack &amp;L) &#123;</span><br><span class="line">    if (Empty(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法删除返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    while (L-&gt;next != NULL) &#123;</span><br><span class="line">        LiStack p = L-&gt;next;  // 删除链栈</span><br><span class="line">        L-&gt;next = p-&gt;next;  // 删除链栈</span><br><span class="line">        free(p);  // 释放结点</span><br><span class="line">    &#125;</span><br><span class="line">    free(L);  // 释放结点</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除链栈 不带头结点</span><br><span class="line">int DeleteStackWithoutFirstNode(LiStack &amp;L) &#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(L)) &#123;</span><br><span class="line">        return -1;  // 栈空，无法删除返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    while (L != NULL) &#123;</span><br><span class="line">        LiStack p = L;  // 删除链栈</span><br><span class="line">        L = L-&gt;next;  // 删除链栈</span><br><span class="line">        free(p);  // 释放结点</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 队列的顺序实现</span><br><span class="line">typedef struct SqQueue&#123;</span><br><span class="line">    int data[SqQueueMaxSize];  // 数据</span><br><span class="line">    int front;  // 队头</span><br><span class="line">    int rear;  // 队尾</span><br><span class="line">&#125;SqQueue;</span><br><span class="line"></span><br><span class="line">// 初始化队列</span><br><span class="line">int InitQueue(SqQueue &amp;Q) &#123;</span><br><span class="line">    Q.front = 0;  // 队头</span><br><span class="line">    Q.rear = 0;  // 队尾</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断队列是否为空</span><br><span class="line">int Empty(SqQueue Q) &#123;</span><br><span class="line">    return Q.front == Q.rear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断队列是否满</span><br><span class="line">int Full(SqQueue Q) &#123;</span><br><span class="line">    return (Q.rear + 1) % SqQueueMaxSize == Q.front;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入队</span><br><span class="line">int EnQueue(SqQueue &amp;Q, int x) &#123;</span><br><span class="line">    if (Full(Q)) &#123;</span><br><span class="line">        return -1;  // 队满，无法入队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    Q.data[Q.rear] = x;  // 入队</span><br><span class="line">    Q.rear = (Q.rear + 1) % SqQueueMaxSize;  // 入队</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出队</span><br><span class="line">int DeQueue(SqQueue &amp;Q, int &amp;x) &#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法出队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = Q.data[Q.front];  // 出队</span><br><span class="line">    Q.front = (Q.front + 1) % SqQueueMaxSize;  // 出队</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取对头元素</span><br><span class="line">int GetHead(SqQueue Q, int &amp;x) &#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法获取对头元素返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    x = Q.data[Q.front];  // 获取对头元素</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除队列</span><br><span class="line">int DeleteQueue(SqQueue &amp;Q) &#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法删除返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    Q.front = 0;  // 队头</span><br><span class="line">    Q.rear = 0;  // 队尾</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 队列长度</span><br><span class="line">int Length(SqQueue Q) &#123;</span><br><span class="line">    return (Q.rear - Q.front + SqQueueMaxSize) % SqQueueMaxSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 链队列</span><br><span class="line">typedef struct LinkNode&#123;</span><br><span class="line">    int data;  // 数据</span><br><span class="line">    struct LinkNode *next;  // 指针</span><br><span class="line">&#125;LinkNode;</span><br><span class="line">typedef struct LinkQueue&#123;</span><br><span class="line">    LinkNode *front;  // 队头</span><br><span class="line">    LinkNode *rear;  // 队尾</span><br><span class="line">    // int length;  // 队列长度(如果频繁访问队列长度可添加长度计数器)</span><br><span class="line">&#125;LinkQueue;</span><br><span class="line"></span><br><span class="line">// 初始化链队列</span><br><span class="line">int InitQueue(LinkQueue &amp;Q)&#123;</span><br><span class="line">    Q.front = (LinkNode *)malloc(sizeof(LinkNode));  // 队头</span><br><span class="line">    Q.rear = Q.front;  // 队尾</span><br><span class="line">    Q.front-&gt;next = NULL;  // 队头指针</span><br><span class="line">    return 0;  // 初始化成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 初始化链队列 不带头结点</span><br><span class="line">int InitQueueWithoutFirstNode(LinkQueue &amp;Q)&#123;</span><br><span class="line">    Q.front = NULL;  // 队头</span><br><span class="line">    Q.rear = NULL;  // 队尾</span><br><span class="line">    return 0;  // 初始化成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断链队列是否为空</span><br><span class="line">bool Empty(LinkQueue Q)&#123;</span><br><span class="line">    return Q.front == Q.rear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断链队列是否为空 不带头结点</span><br><span class="line">bool EmptyWithoutFirstNode(LinkQueue Q)&#123;</span><br><span class="line">    return Q.front == NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入队</span><br><span class="line">int EnQueue(LinkQueue &amp;Q, int x)&#123;</span><br><span class="line">    LinkNode *s = (LinkNode *)malloc(sizeof(LinkNode));  // 创建结点</span><br><span class="line">    if (s == NULL) &#123;</span><br><span class="line">        return -1;  // 创建结点失败，无法入队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    s-&gt;data = x;  // 新结点数据</span><br><span class="line">    s-&gt;next = NULL;  // 新结点的next指针为空</span><br><span class="line">    Q.rear-&gt;next = s;  // 将新结点插入队尾</span><br><span class="line">    Q.rear = s;  // 修改对尾指针</span><br><span class="line">    return 0;  // 入队成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出队</span><br><span class="line">int DeQueue(LinkQueue &amp;Q, int &amp;x)&#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法出队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front-&gt;next;  // 出队结点</span><br><span class="line">    x = p-&gt;data;  // 出队结点数据</span><br><span class="line">    Q.front-&gt;next = p-&gt;next;  // 将队头指针指向出队结点的下一个结点</span><br><span class="line">    if (Q.rear == p) &#123;  // 如果出队结点是队尾结点，则修改队尾指针</span><br><span class="line">        Q.rear = Q.front;</span><br><span class="line">    &#125;</span><br><span class="line">    free(p);  // 释放结点</span><br><span class="line">    return 0;  // 出队成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 入队 不带头结点</span><br><span class="line">int EnQueueWithoutFirstNode(LinkQueue &amp;Q, int x)&#123;</span><br><span class="line">    LinkNode *s = (LinkNode *)malloc(sizeof(LinkNode));  // 创建结点</span><br><span class="line">    if (s == NULL) &#123;</span><br><span class="line">        return -1;  // 创建结点失败，无法入队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    s-&gt;data = x;  // 新结点数据</span><br><span class="line">    s-&gt;next = NULL;  // 新结点的next指针为空</span><br><span class="line">    if (EmptyWithoutFirstNode(Q)) &#123;  // 如果队列为空</span><br><span class="line">        Q.front = s;  // 队头指针指向新结点</span><br><span class="line">    &#125; else &#123;  // 如果队列不为空</span><br><span class="line">        Q.rear-&gt;next = s;  // 将新结点插入队尾</span><br><span class="line">    &#125;</span><br><span class="line">    Q.rear = s;  // 修改对尾指针</span><br><span class="line">    return 0;  // 入队成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 出队 不带头结点</span><br><span class="line">int DeQueueWithoutFirstNode(LinkQueue &amp;Q, int &amp;x)&#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法出队返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front;  // 出队结点</span><br><span class="line">    x = p-&gt;data;  // 出队结点数据</span><br><span class="line">    Q.front = p-&gt;next;  // 将队头指针指向出队结点的下一个结点</span><br><span class="line">    if (Q.rear == p) &#123;  // 如果出队结点是队尾结点，则修改队尾指针</span><br><span class="line">        Q.rear = Q.front;</span><br><span class="line">    &#125;</span><br><span class="line">    free(p);  // 释放结点</span><br><span class="line">    return 0;  // 出队成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 打印链队列</span><br><span class="line">int PrintQueue(LinkQueue Q)&#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法打印返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front-&gt;next;  // 打印结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        printf(&quot;%d &quot;, p-&gt;data);  // 打印结点数据</span><br><span class="line">        p = p-&gt;next;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);  // 换行</span><br><span class="line">    return 0;  // 打印成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 打印链队列 不带头结点</span><br><span class="line">int PrintQueueWithoutFirstNode(LinkQueue Q)&#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法打印返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front;  // 打印结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        printf(&quot;%d &quot;, p-&gt;data);  // 打印结点数据</span><br><span class="line">        p = p-&gt;next;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);  // 换行</span><br><span class="line">    return 0;  // 打印成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求链队列长度</span><br><span class="line">int Length(LinkQueue Q)&#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return 0;  // 队空，长度为0</span><br><span class="line">    &#125;</span><br><span class="line">    int len = 0;  // 长度</span><br><span class="line">    LinkNode *p = Q.front-&gt;next;  // 计算结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        len++;  // 长度加1</span><br><span class="line">        p = p-&gt;next;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    return len;  // 返回长度</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求链队列长度 不带头结点</span><br><span class="line">int LengthWithoutFirstNode(LinkQueue Q)&#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(Q)) &#123;</span><br><span class="line">        return 0;  // 队空，长度为0</span><br><span class="line">    &#125;</span><br><span class="line">    int len = 0;  // 长度</span><br><span class="line">    LinkNode *p = Q.front;  // 计算结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        len++;  // 长度加1</span><br><span class="line">        p = p-&gt;next;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    return len;  // 返回长度</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 销毁链队列</span><br><span class="line">int DestroyQueue(LinkQueue &amp;Q)&#123;</span><br><span class="line">    if (Empty(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法销毁返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front-&gt;next;  // 销毁结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        LinkNode *q = p-&gt;next;  // 保存下一个结点</span><br><span class="line">        free(p);  // 释放结点</span><br><span class="line">        p = q;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    Q.front-&gt;next = NULL;  // 队头指针指向空</span><br><span class="line">    Q.rear = Q.front;  // 队尾指针指向队头</span><br><span class="line">    return 0;  // 销毁成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 销毁链队列 不带头结点</span><br><span class="line">int DestroyQueueWithoutFirstNode(LinkQueue &amp;Q)&#123;</span><br><span class="line">    if (EmptyWithoutFirstNode(Q)) &#123;</span><br><span class="line">        return -1;  // 队空，无法销毁返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode *p = Q.front;  // 销毁结点</span><br><span class="line">    while (p != NULL) &#123;</span><br><span class="line">        LinkNode *q = p-&gt;next;  // 保存下一个结点</span><br><span class="line">        free(p);  // 释放结点</span><br><span class="line">        p = q;  // 指向下一个结点</span><br><span class="line">    &#125;</span><br><span class="line">    Q.front = NULL;  // 队头指针指向空</span><br><span class="line">    Q.rear = NULL;  // 队尾指针指向空</span><br><span class="line">    return 0;  // 销毁成功</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/02/13/linearlist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/02/13/linearlist/" class="post-title-link" itemprop="url">数据结构——线性表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-13 18:12:54" itemprop="dateCreated datePublished" datetime="2022-02-13T18:12:54+08:00">2022-02-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>头文件LinearList.h</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br></pre></td><td class="code"><pre><span class="line">// LinearList.h - 线性表</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">#define MAXSIZE 10  // 定义静态链表的最大长度</span><br><span class="line">#define SqListMaxSize 10 </span><br><span class="line">#define SqListInitSize 10 </span><br><span class="line"></span><br><span class="line">// 数据部分用int类型数据模拟</span><br><span class="line"></span><br><span class="line">/*********************************************************************************************************************************</span><br><span class="line"> * 数据类型一览</span><br><span class="line"> * SqList 顺序表 静态分配 </span><br><span class="line"> * SeqList 顺序表 动态分配 </span><br><span class="line"> * LNode *, LinkList 单链表</span><br><span class="line"> * DNode *, DLinklist 双链表</span><br><span class="line"> * Node 静态链表（单个）</span><br><span class="line"> * SLinkList 静态链表（长度为MAXSIZE）</span><br><span class="line"> * </span><br><span class="line"> * 操作函数</span><br><span class="line"> * int Length(L) 求表L长度函数 返回表长</span><br><span class="line"> * int LengthWithoutFirstNode(L) 求不带头结点的单链表L长度函数 返回表长 </span><br><span class="line"> * bool Empty(L) 判空函数  空返回1，非空返回0</span><br><span class="line"> * bool EmptyWithoutFirstNode (L) 单链表不带头结点判空函数  空返回1，非空返回0</span><br><span class="line"> * int PrintList(L) 按顺序输出表L里内容 输出成功返回0，表空无输出返回1 </span><br><span class="line"> * int PrintListWithoutFirstNode(L) 按顺序输出无头节点单链表L里内容 输出成功返回0，表空无输出返回1</span><br><span class="line"> * int InitList(L) 初始化表L 正常结束返回0，内存不够初始化失败返回1</span><br><span class="line"> * int InitListWithoutFirstNode(L) 无头节点初始化单链表表L 正常结束返回0，内存不够初始化失败返回1</span><br><span class="line"> * int IncreaseSize(L, len) 动态分配顺序表增加长度 正常结束返回0，len大小不合法返回1</span><br><span class="line"> * int ListInsert(L, e) 在表L的末尾插入元素e 正常结束返回0，表满导致内存不够返回1</span><br><span class="line"> * int ListInsert(L, e, i) 在表L的第i位插入元素e 正常结束返回0，变量i大小不合法返回1，表满导致内存不够返回2</span><br><span class="line"> * int ListInsertWithoutFirstNode(L, e, i) 在不带头结点的单链表L的第i位插入元素e 正常结束返回0，变量i大小不合法返回1</span><br><span class="line"> * int ListDelete(L, i) 删除表L的第i位元素 正常结束返回0，变量i大小不合法返回1</span><br><span class="line"> * int ListDeleteWithoutFirstNode(L, i) 删除表L的第i位元素 正常结束返回0，变量i大小不合法返回1</span><br><span class="line"> * int ListPop(L, i) 弹出表L的第i位 正常结束返回弹出数据，变量i大小不合法返回-1</span><br><span class="line"> * int ListPopWithoutFirstNode(L, i) 弹出表L的第i位 正常结束返回弹出数据，变量i大小不合法返回-1</span><br><span class="line"> * int GetElem(L, i) 按位查找表L的元素 返回查找到的元素值，变量i大小不合法返回-1</span><br><span class="line"> * LNode *GetElem(L, i) 按位查找表L的结点 返回查找到的结点，变量i大小不合法返回NULL</span><br><span class="line"> * LNode *GetElemWithoutFirstNode (L, i) 按位查找不带头结点的单链表L的结点 返回查找到的结点，变量i大小不合法返回NULL</span><br><span class="line"> * DNode *GetElem(L, i) 按位查找表L的结点 返回查找到的结点，变量i大小不合法返回NULL</span><br><span class="line"> * int LocateElem(L, e) 按值查找表L的元素 返回查找到的元素位置，无匹配值返回0</span><br><span class="line"> * LNode *LocateElem(L, e) 按值查找表L的元素 返回查找到的元素位置，无匹配值返回NULL</span><br><span class="line"> * DNode *LocateElem(L, e) 按值查找表L的元素 返回查找到的元素位置，无匹配值返回NULL</span><br><span class="line"> * int InsertNextNode(p, e) 单链表中在指定结点后插入元素e 正常结束返回0，p结点不存在返回1，新结点创建失败返回2</span><br><span class="line"> * int InsertNextDNode(p, s) 双链表中在结点p后插入结点s 正常结束返回0，结点不存在返回1</span><br><span class="line"> * int InsertPriorNode(p, e) 单链表中在指定结点前插入元素e 正常结束返回0，p结点不存在返回1，新结点创建失败返回2</span><br><span class="line"> * int DeleteNode(p) 删除单链表中指定结点p 正常结束返回0，结点p不存在返回1，结点p为链表最后结点则无法删除返回2</span><br><span class="line"> * int DeleteDNode(p) 删除单链表中指定结点p 正常结束返回0，结点p不存在返回1</span><br><span class="line"> * int DeleteNextDNode(p) 删除双链表中指定结点p的后继节点q 正常结束返回0，结点p不存在返回1，结点p为链表最后结点则无法删除返回2</span><br><span class="line"> * LinkList List_TailInsert() 正向建立一个单链表 返回已经初始化好的单链表</span><br><span class="line"> * LinkList List_TailInsertWithoutFirstNode() 正向建立一个单链表 返回已经初始化好的不带头结点的单链表</span><br><span class="line"> * LinkList List_HeadInsert() 反向建立一个单链表 返回已经初始化好的单链表</span><br><span class="line"> * LinkList List_HeadInsertWithoutFirstNode() 反向建立一个单链表 返回已经初始化好的不带头结点的单链表</span><br><span class="line"> * DsetoryList(L) 删除表L，归还内存给系统 正常结束返回0 (双链表已完成)</span><br><span class="line"> * int List_Reverse(L) 反转链表L 正常结束返回0</span><br><span class="line"> * </span><br><span class="line"> *********************************************************************************************************************************/</span><br><span class="line"> </span><br><span class="line">// 顺序表 静态分配 </span><br><span class="line">typedef struct SqList &#123;</span><br><span class="line">int data[SqListMaxSize];  // 利用静态数组存放数据 </span><br><span class="line">int length;  // 表示当前顺序表长度 </span><br><span class="line">&#125;SqList; </span><br><span class="line"></span><br><span class="line">// 顺序表 动态分配（伪动态，实则空间不够开创更大的一篇空间并且将之前的值赋值过去）</span><br><span class="line">typedef struct SeqList &#123;</span><br><span class="line">int *data;  // 指示动态分配数组的指针 </span><br><span class="line">int MaxSize;  // 顺序表的最大容量 </span><br><span class="line">int length;  // 顺序表的当前长度 </span><br><span class="line">&#125;SeqList; </span><br><span class="line"></span><br><span class="line">// 顺序表求表长 静态分配</span><br><span class="line">int Length(SqList L)&#123;</span><br><span class="line">return L.length;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表求表长 动态分配</span><br><span class="line">int Length(SeqList L)&#123;</span><br><span class="line">return L.length;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表判空 静态分配</span><br><span class="line">bool Empty(SqList L)&#123;</span><br><span class="line">return L.length == 0;  // 返回1表示空，返回0表示非空 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表判空 动态分配</span><br><span class="line">bool Empty(SeqList L)&#123;</span><br><span class="line">return L.length == 0;  // 返回1表示空，返回0表示非空 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表输出内容 静态分配</span><br><span class="line">int PrintList(SqList L)&#123;</span><br><span class="line">if(Empty(L))&#123;</span><br><span class="line">return 1;  // 表空则无需输出，返回1 </span><br><span class="line">&#125;</span><br><span class="line">for(int i = 0; i &lt; L.length; i++)&#123;</span><br><span class="line">std::cout &lt;&lt; L.data[i] &lt;&lt; &quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">return 0;  // 输出成功完成后返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表输出内容 动态分配</span><br><span class="line">int PrintList(SeqList L)&#123;</span><br><span class="line">if(Empty(L))&#123;</span><br><span class="line">return 1;  // 表空则无需输出，返回1 </span><br><span class="line">&#125;</span><br><span class="line">for(int i = 0; i &lt; L.length; i++)&#123;</span><br><span class="line">std::cout &lt;&lt; L.data[i] &lt;&lt; &quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">return 0;  // 输出成功完成后返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表初始化 静态分配 </span><br><span class="line">int InitList(SqList &amp;L)&#123;</span><br><span class="line">L.length = 0;</span><br><span class="line">return 0;  // 正常结束返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表初始化 动态分配</span><br><span class="line">int InitList(SeqList &amp;L)&#123;</span><br><span class="line">L.data = (int *)malloc(SqListInitSize*sizeof(int));  // 初始大小为InitSize个ElemType类型的元素大小</span><br><span class="line">// 实现初始大小分配方式：malloc申请一整片连续的空间，返回初始地址，然后强制转换成ElemType类型指针 </span><br><span class="line">L.MaxSize = SqListInitSize;</span><br><span class="line">L.length = 0;</span><br><span class="line">return 0;  // 正常结束返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表增加动态数组长度（本质开拓一片更大的内存空间，将之前的数据转存过去） </span><br><span class="line">// TODO:新建回收内存机制 </span><br><span class="line">int IncreaseSize(SeqList &amp;L, int len)&#123;  // 新增加长度为len </span><br><span class="line">if(len &lt; 1)&#123;</span><br><span class="line">return 1;  // 新增地址空间长度有误，返回1</span><br><span class="line">&#125; </span><br><span class="line">int *p = L.data;  // 创建一个指针指p向原数据地址 </span><br><span class="line">L.data = (int *)malloc((L.MaxSize+len)*sizeof(int));  // 再将L.data指向新开辟的更大的地址空间 </span><br><span class="line">/*ATT:这里malloc的内存大小要以表中MaxSize的数量加上len再乘以ElemType的大小*/</span><br><span class="line">for(int i = 0; i &lt; L.length; i++)&#123;  // 将数据迁移到新的地址 </span><br><span class="line">L.data[i] = p[i];</span><br><span class="line">&#125;</span><br><span class="line">L.MaxSize += len;  // 将顺序表的最大长度增加len </span><br><span class="line">free(p);  // 释放原始内存空间 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表默认插入操作 静态分配 插入末尾 </span><br><span class="line">int ListInsert(SqList &amp;L, int e)&#123;</span><br><span class="line">if(L.length &gt;= SqListMaxSize)&#123;</span><br><span class="line">return 2;  // 线性表已满 </span><br><span class="line">&#125;</span><br><span class="line">L.data[L.length] = e;</span><br><span class="line">L.length++;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表插入操作 静态分配 </span><br><span class="line">// 在顺序表L的第i位插入元素e </span><br><span class="line">// TODO:整合将部分数据向前、后移动操作 </span><br><span class="line">int ListInsert(SqList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(L.length &gt;= SqListMaxSize)&#123;</span><br><span class="line">return 2;  // 线性表已满 </span><br><span class="line">&#125;</span><br><span class="line">for(int j = L.length; j &gt;= i; j--)&#123;</span><br><span class="line">L.data[j] = L.data[j-1];  // 将i及其后面的元素后移一位 </span><br><span class="line">&#125;</span><br><span class="line">L.data[i-1] = e;</span><br><span class="line">L.length++;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表默认插入操作 动态分配 插入末尾 </span><br><span class="line">int ListInsert(SeqList &amp;L, int e)&#123;</span><br><span class="line">if(L.length &gt;= L.MaxSize)&#123;  // 线性表已满 </span><br><span class="line">int functionCode = IncreaseSize(L, SqListMaxSize); </span><br><span class="line">if(functionCode!=0)&#123;</span><br><span class="line">return functionCode;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">L.data[L.length] = e;</span><br><span class="line">L.length++;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表插入操作 动态分配 </span><br><span class="line">// 在顺序表L的第i位插入元素e </span><br><span class="line">int ListInsert(SeqList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(L.length &gt;= L.MaxSize)&#123;  // 线性表已满 </span><br><span class="line">int functionCode = IncreaseSize(L, SqListMaxSize); </span><br><span class="line">if(functionCode!=0)&#123;</span><br><span class="line">return functionCode;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">for(int j = L.length; j &gt;= i; j--)&#123;  // 将i及其后面的元素后移一位 </span><br><span class="line">L.data[j] = L.data[j-1];</span><br><span class="line">&#125;</span><br><span class="line">L.data[i-1] = e;</span><br><span class="line">L.length++;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表删除操作 静态分配</span><br><span class="line">int ListDelete(SqList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">for(int j = i; j&lt;L.length; j++)&#123;</span><br><span class="line">L.data[j-1] = L.data[j];  // 将i及其后面的元素前移一位 </span><br><span class="line">&#125;</span><br><span class="line">L.length--;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表删除操作 动态分配</span><br><span class="line">int ListDelete(SeqList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">for(int j = i; j&lt;L.length; j++)&#123;</span><br><span class="line">L.data[j-1] = L.data[j];  // 将i及其后面的元素前移一位 </span><br><span class="line">&#125;</span><br><span class="line">L.length--;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表弹出操作 静态分配</span><br><span class="line">int ListPop(SqList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">int out = L.data[i-1]; </span><br><span class="line">for(int j = i; j&lt;L.length; j++)&#123;</span><br><span class="line">L.data[j-1] = L.data[j];  // 将i及其后面的元素前移一位 </span><br><span class="line">&#125;</span><br><span class="line">L.length--;</span><br><span class="line">return out;  // 正常结束返回弹出值 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表弹出操作 动态分配</span><br><span class="line">int ListPop(SeqList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">int out = L.data[i-1]; </span><br><span class="line">for(int j = i; j&lt;L.length; j++)&#123;</span><br><span class="line">L.data[j-1] = L.data[j];  // 将i及其后面的元素前移一位 </span><br><span class="line">&#125;</span><br><span class="line">L.length--;</span><br><span class="line">return out;  // 正常结束返回弹出值 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表按位查找 静态分配 </span><br><span class="line">int GetElem(SqList L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">return L.data[i-1];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 顺序表按位查找 动态分配 </span><br><span class="line">int GetElem(SeqList L, int i)&#123;</span><br><span class="line">if(i&lt;1i&gt;L.length+1)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">return L.data[i-1];</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表按值查找 静态分配 </span><br><span class="line">// TODO:1.完善查找代码，可返回数组等 2.整合比较代码为函数 </span><br><span class="line">int LocateElem(SqList L, int e)&#123;</span><br><span class="line">for(int i = 0; i &lt; L.length; i++)&#123;</span><br><span class="line">if(L.data[i]==e)&#123;  // 判断数据是否和给定的数据一致</span><br><span class="line">// 当数据为结构类型变量时，要依次比较其每一个分量 </span><br><span class="line">return i+1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;  // 无匹配值返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 顺序表按值查找 动态分配 </span><br><span class="line">int LocateElem(SeqList L, int e)&#123;</span><br><span class="line">for(int i = 0; i &lt; L.length; i++)&#123;</span><br><span class="line">if(L.data[i]==e)&#123;</span><br><span class="line">return i+1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;  // 无匹配值返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 删除顺序表 静态分配</span><br><span class="line">int DsetoryList(SqList &amp;L)&#123;</span><br><span class="line">    if(L.length == 0)&#123;</span><br><span class="line">        return 0;  // 空表不需要释放 </span><br><span class="line">    &#125;</span><br><span class="line">    return 0;  // 正常结束返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除顺序表 动态分配</span><br><span class="line">int DsetoryList(SeqList &amp;L)&#123;</span><br><span class="line">    if(L.length == 0)&#123;</span><br><span class="line">        return 0;  // 空表不需要释放 </span><br><span class="line">    &#125;</span><br><span class="line">    // 释放数据空间</span><br><span class="line">    free(L.data);</span><br><span class="line">    L.length = 0;  // 重置长度 </span><br><span class="line">    L.data = NULL;  // 重置数据指针</span><br><span class="line">    return 0;  // 正常结束返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表</span><br><span class="line">typedef struct LNode&#123;  // 定义单链表的结点类型 </span><br><span class="line">int data;  //每个结点存放一个元素 数据域 </span><br><span class="line">struct LNode *next;  // 指针指向下一个结点 指针域 </span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"> </span><br><span class="line">// 单链表初始化 （默认带头结点） </span><br><span class="line">int InitList(LinkList &amp;L)&#123;</span><br><span class="line">L = (LNode *)malloc(sizeof(LNode));  //分配头结点</span><br><span class="line">if(L == NULL)&#123;</span><br><span class="line">return 1;  // 头结点指针为空时分配失败，内存不足，返回1</span><br><span class="line">&#125; </span><br><span class="line">L-&gt;next = NULL;  // 头结点之后无结点</span><br><span class="line">return 0;  // 正常结束返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空操作 </span><br><span class="line">bool Empty(LinkList L)&#123;</span><br><span class="line">return L-&gt;next == NULL;  // 返回1表示空，返回0表示非空 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表初始化 不带头结点 </span><br><span class="line">int InitListWithoutFirstNode(LinkList &amp;L)&#123;</span><br><span class="line">L = NULL;  // 空表，暂无结点，防止脏数据 </span><br><span class="line">return 0;  // 正常结束返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空操作 不带头结点 </span><br><span class="line">bool EmptyWithoutFirstNode(LinkList L)&#123;</span><br><span class="line">return L == NULL;  // 返回1表示空，返回0表示非空 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表求表长</span><br><span class="line">int Length(LinkList L)&#123;</span><br><span class="line">int length = 0;  // 表示初始结点为第0结点</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">p = L;</span><br><span class="line">while(p-&gt;next != NULL &amp;&amp; p-&gt;next != L)&#123;  // 循环的目的是找到最后一个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">length++;</span><br><span class="line">&#125;</span><br><span class="line">return length; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表求表长 不带头结点</span><br><span class="line">int LengthWithoutFirstNode(LinkList L)&#123;</span><br><span class="line">int length = 0;  // 表示初始结点为第0结点</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">p = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;  // 循环的目的是找到最后一个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">length++;</span><br><span class="line">&#125;</span><br><span class="line">return length; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表输出内容</span><br><span class="line">int PrintList(LinkList L)&#123;</span><br><span class="line">if(Empty(L))&#123;</span><br><span class="line">return 1;  // 表空则无需输出，返回1 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">p = L;</span><br><span class="line">while(p-&gt;next != NULL)&#123;</span><br><span class="line">std::cout &lt;&lt; p-&gt;next-&gt;data &lt;&lt; &quot; &quot;;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">return 0;  // 输出成功完成后返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表输出内容 不带头结点 </span><br><span class="line">int PrintListWithoutFirstNode(LinkList L)&#123;</span><br><span class="line">if(EmptyWithoutFirstNode(L))&#123;</span><br><span class="line">return 1;  // 表空则无需输出，返回1 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">p = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;</span><br><span class="line">std::cout &lt;&lt; p-&gt;data &lt;&lt; &quot; &quot;;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">return 0;  // 输出成功完成后返回0 </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 单链表插入操作 默认插入表尾 ATT：不能用此方法建立一个单链表，时间复杂度过高（O(n^2)）</span><br><span class="line">int ListInsert(LinkList &amp;L, int e)&#123;</span><br><span class="line">if(L == NULL)&#123;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = L;</span><br><span class="line">L = s;  // 将头指针指向新结点 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据  </span><br><span class="line">while(p-&gt;next != NULL)&#123;  // 循环的目的是找到最后结点并且对其操作</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e; </span><br><span class="line">s-&gt;next = NULL;</span><br><span class="line">p-&gt;next = s;  // 将s结点排在p之后 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">int ListInsertWithoutFirstNode(LinkList &amp;L, int e)&#123;</span><br><span class="line">return ListInsert(L, e); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表插入操作 </span><br><span class="line">int ListInsertFull(LinkList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i&lt;1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">/*</span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i - 1)&#123;  // 循环的目的是找到第i-1个结点并且对其操作</span><br><span class="line">// 如果插在末尾即加上新元素一共i个结点，找到第i-1个结点后出循环，p指向第i-1个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">注释区域可替换为如下循环*/</span><br><span class="line">for(int j = 0; p!= NULL &amp;&amp; j &lt; i - 1; j++)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125; </span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;  // 将s结点排在p之后 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表插入操作 不带头结点 </span><br><span class="line">int ListInsertWithoutFirstNodeFull(LinkList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i &lt; 1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(i == 1)&#123;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = L;</span><br><span class="line">L = s;  // 将头指针指向新结点 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据</span><br><span class="line">for(int j = 1; p != NULL &amp;&amp; j &lt; i - 1; j++)&#123;</span><br><span class="line">// 这里的j表示当前扫描到的结点位置 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125; </span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;  // 将s结点排在p之后 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表在指定结点后插入元素 </span><br><span class="line">int InsertNextNode(LNode *p, int e)&#123;</span><br><span class="line">if(p == NULL)&#123;  // 便于其他函数调用时候传入NULL值</span><br><span class="line">return 1;  // p结点不存在返回1 </span><br><span class="line">&#125;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">if(s == NULL)&#123;</span><br><span class="line">return 2;  // 新结点内存分配失败创建失败返回2 </span><br><span class="line">&#125;</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 单链表在指定结点前插入元素 </span><br><span class="line">int InsertPriorNode(LNode *p, int e)&#123;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // p结点不存在返回1 </span><br><span class="line">&#125;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">if(s == NULL)&#123;</span><br><span class="line">return 2;  // 新结点内存分配失败创建失败返回2 </span><br><span class="line">&#125;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;</span><br><span class="line">s-&gt;data = p-&gt;data;  // p中数据赋值到s </span><br><span class="line">p-&gt;data = e;  // p中数据覆盖为e </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 单链表删除操作 </span><br><span class="line">int ListDelete(LinkList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">// 下行直至循环结束代码可直接调用查找结点函数GetElem查找到i-1个结点</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i - 1)&#123;  // 循环的目的是找到第i-1个结点并且对其操作</span><br><span class="line">// 如果插在末尾即加上新元素一共i个结点，找到第i-1个结点后出循环，p指向第i-1个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">if(p-&gt;next == NULL)&#123;  // 此系列代码无法删除最后一个结点</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = p-&gt;next;</span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">free(q);  // 释放结点空间 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表弹出操作 </span><br><span class="line">int ListPop(LinkList &amp;L, int i)&#123;</span><br><span class="line">if(i&lt;1)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i - 1)&#123;  // 循环的目的是找到第i-1个结点并且对其操作</span><br><span class="line">// 如果插在末尾即加上新元素一共i个结点，找到第i-1个结点后出循环，p指向第i-1个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">if(p-&gt;next == NULL)&#123;</span><br><span class="line">return -1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = p-&gt;next;</span><br><span class="line">int out = q-&gt;data; </span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">free(q);  // 释放结点空间 </span><br><span class="line">return out;  // 正常结束返回弹出值 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表删除操作 不带头结点</span><br><span class="line">int ListDeleteWithoutFirstNode(LinkList &amp;L, int i)&#123;</span><br><span class="line">if(i &lt; 1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(i == 1)&#123;</span><br><span class="line">if(EmptyWithoutFirstNode(L))&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = L;</span><br><span class="line">if(L-&gt;next == NULL)&#123;</span><br><span class="line">L = NULL;</span><br><span class="line">free(q);</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">L = L-&gt;next;</span><br><span class="line">free(q);</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据</span><br><span class="line">for(int j = 1; p != NULL &amp;&amp; j &lt; i - 1; j++)&#123;</span><br><span class="line">// 这里的j表示当前扫描到的结点位置 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125; </span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">if(p-&gt;next == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = p-&gt;next;</span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">free(q);  // 释放结点空间 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表弹出操作 不带头结点</span><br><span class="line">int ListPopWithoutFirstNode(LinkList &amp;L, int i)&#123;</span><br><span class="line">if(i &lt; 1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(i == 1)&#123;</span><br><span class="line">if(EmptyWithoutFirstNode(L))&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = L;</span><br><span class="line">int out = L-&gt;data;</span><br><span class="line">if(L-&gt;next == NULL)&#123;</span><br><span class="line">L = NULL;</span><br><span class="line">free(q);</span><br><span class="line">return out;  // 正常结束返回弹出值</span><br><span class="line">&#125;</span><br><span class="line">L = L-&gt;next;</span><br><span class="line">free(q);</span><br><span class="line">return out;  // 正常结束返回弹出值 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据</span><br><span class="line">for(int j = 1; p != NULL &amp;&amp; j &lt; i - 1; j++)&#123;</span><br><span class="line">// 这里的j表示当前扫描到的结点位置 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125; </span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">if(p-&gt;next == NULL)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *q = p-&gt;next;</span><br><span class="line">int out = p-&gt;data; </span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">free(q);  // 释放结点空间 </span><br><span class="line">return out;  // 正常结束返回弹出值 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 单链表删除指定结点p</span><br><span class="line">int DeleteNode(LNode *p)&#123;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 结点p不存在 </span><br><span class="line">&#125;</span><br><span class="line">LNode *q = p-&gt;next;</span><br><span class="line">if(q == NULL)&#123;</span><br><span class="line">return 2;  // p为最后一个结点，无法通过该函数删除 </span><br><span class="line">&#125;</span><br><span class="line">p-&gt;data = q-&gt;data;  // ATT：不能用来删除最后一个结点 </span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">free(q);</span><br><span class="line">return 0;  // 正常结束返回0 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按位查找表L的结点</span><br><span class="line">LNode *GetElem(LinkList L, int i)&#123;</span><br><span class="line">if(i&lt;0)&#123;</span><br><span class="line">return NULL;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i)&#123;  // 循环的目的是找到第i个结点并且对其操作</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按位查找表L的结点 不带头结点</span><br><span class="line">LNode *GetElemWithoutFirstNode(LinkList L, int i)&#123;</span><br><span class="line">if(i &lt; 0  L == NULL)&#123;</span><br><span class="line">return NULL;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">LNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">int j = 1;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i)&#123;  // 循环的目的是找到第i个结点并且对其操作</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ListInsertFull简化代码</span><br><span class="line">int ListInsert(LinkList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i&lt;1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">LNode *p = GetElem(L, i-1);  // 查找到第i-1个结点的位置</span><br><span class="line">return InsertNextNode(p, e);  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ListInsertWithoutFirstNodeFull简化代码 </span><br><span class="line">int ListInsertWithoutFirstNode(LinkList &amp;L, int e, int i)&#123;</span><br><span class="line">if(i &lt; 1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">if(i == 1)&#123;</span><br><span class="line">LNode *s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">s-&gt;next = L;</span><br><span class="line">L = s;  // 将头指针指向新结点 </span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line">LNode *p = GetElem(L, i-1);  // 查找到第i-1个结点的位置</span><br><span class="line">return InsertNextNode(p, e);  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按值查找单链表中的元素</span><br><span class="line">LNode *LocateElem(LinkList L, int e)&#123;</span><br><span class="line">LNode *p = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;data != e)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 正向建立一个单链表 尾插法(自动初始化)</span><br><span class="line">LinkList List_TailInsert()&#123;</span><br><span class="line">int sourceData;  // 源数据存放变量</span><br><span class="line">LinkList L = (LinkList)malloc(sizeof(LNode));  // 设置头结点</span><br><span class="line">LNode *s, *r = L;  // r为表尾指针</span><br><span class="line">std::cin &gt;&gt; sourceData;  // 输入源数据</span><br><span class="line">while(sourceData != 9999)&#123;</span><br><span class="line">s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = sourceData;</span><br><span class="line">r-&gt;next = s;  // r指向新表尾</span><br><span class="line">r = s;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">r-&gt;next = NULL;  // 结尾置空</span><br><span class="line">return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 正向建立一个单链表 尾插法(自动初始化) 不带头结点</span><br><span class="line">LinkList List_TailInsertWithoutFirstNode()&#123;  // 未测试</span><br><span class="line">int sourceData;  // 源数据存放变量</span><br><span class="line">LinkList L;  // 设置头结点</span><br><span class="line">std::cin &gt;&gt; sourceData;  // 输入源数据</span><br><span class="line">if(sourceData != 9999)&#123;</span><br><span class="line">L = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">L-&gt;data = sourceData;</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">LNode *s, *r = L;  // r为表尾指针</span><br><span class="line">while(sourceData != 9999)&#123;</span><br><span class="line">s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = sourceData;</span><br><span class="line">r-&gt;next = s;  // r指向新表尾</span><br><span class="line">r = s;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">r-&gt;next = NULL;  // 结尾置空</span><br><span class="line">return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反向建立一个单链表 头插法(自动初始化)</span><br><span class="line">LinkList List_HeadInsertFull()&#123;</span><br><span class="line">LNode *s;</span><br><span class="line">int sourceData;</span><br><span class="line">LinkList L = (LinkList)malloc(sizeof(LNode));</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">while(sourceData !=9999)&#123;</span><br><span class="line">s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = sourceData;</span><br><span class="line">s-&gt;next = L-&gt;next;</span><br><span class="line">L-&gt;next = s;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">return L;</span><br><span class="line">&#125;</span><br><span class="line">LinkList List_HeadInsert()&#123;</span><br><span class="line">LNode *s;</span><br><span class="line">int sourceData;</span><br><span class="line">LinkList L = (LinkList)malloc(sizeof(LNode));</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">while(sourceData !=9999)&#123;</span><br><span class="line">InsertNextNode(L, sourceData);</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反向建立一个单链表 头插法(自动初始化) 不带头结点</span><br><span class="line">LinkList List_HeadInsertWithoutFirstNode()&#123;  // 未测试</span><br><span class="line">LNode *s;</span><br><span class="line">int sourceData;</span><br><span class="line">LinkList L = NULL;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">if(sourceData != 9999)&#123;</span><br><span class="line">L = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">L-&gt;data = sourceData;</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">while(sourceData !=9999)&#123;</span><br><span class="line">s = (LNode *)malloc(sizeof(LNode));</span><br><span class="line">s-&gt;data = sourceData;</span><br><span class="line">s-&gt;next = L-&gt;next;</span><br><span class="line">L-&gt;next = s;</span><br><span class="line">std::cin &gt;&gt; sourceData;</span><br><span class="line">&#125;</span><br><span class="line">return L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 将单链表反转（Copilot）</span><br><span class="line">int List_Reverse(LinkList &amp;L)&#123;</span><br><span class="line">LNode *p, *q;</span><br><span class="line">p = L-&gt;next;</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;</span><br><span class="line">q = p-&gt;next;</span><br><span class="line">p-&gt;next = L-&gt;next;</span><br><span class="line">L-&gt;next = p;</span><br><span class="line">p = q;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除单链表</span><br><span class="line">int DsetoryList(LinkList &amp;L)&#123;</span><br><span class="line">    LNode *p, *q;</span><br><span class="line">    p = L;</span><br><span class="line">    while(p != NULL)&#123;</span><br><span class="line">        q = p-&gt;next;</span><br><span class="line">        free(p);</span><br><span class="line">        p = q;</span><br><span class="line">    &#125;</span><br><span class="line">    L = NULL;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判尾</span><br><span class="line">bool isTail(LNode *p)&#123;</span><br><span class="line">return p-&gt;next == NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 双链表</span><br><span class="line">typedef struct DNode&#123;  // 定义单链表的结点类型 </span><br><span class="line">int data;  //每个结点存放一个元素 数据域 </span><br><span class="line">struct DNode *prior, *next;  // 指针指向下一个结点 指针域 </span><br><span class="line">&#125;DNode, *DLinklist;</span><br><span class="line"></span><br><span class="line">// 双链表的初始化（默认为带头结点）</span><br><span class="line">int InitList(DLinklist &amp;L)&#123;</span><br><span class="line">L = (DNode *)malloc(sizeof(DNode));</span><br><span class="line">if(L == NULL)&#123;</span><br><span class="line">return 1;  // 内存分配失败，初始化失败返回1</span><br><span class="line">&#125;</span><br><span class="line">L-&gt;prior = NULL;</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 双链表的判空</span><br><span class="line">bool Empty(DLinklist L)&#123;</span><br><span class="line">return L-&gt;next == NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求表长</span><br><span class="line">int Length(DLinklist L)&#123;</span><br><span class="line">int length = 0;  // 表示初始结点为第0结点</span><br><span class="line">DNode *p;  // 指针p指向当前扫描到的结点 </span><br><span class="line">p = L;</span><br><span class="line">while(p-&gt;next != NULL &amp;&amp; p-&gt;next != L)&#123;  // 循环的目的是找到最后一个结点 </span><br><span class="line">p = p-&gt;next;</span><br><span class="line">length++;</span><br><span class="line">&#125;</span><br><span class="line">return length; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 双链表中在结点p后插入结点s</span><br><span class="line">int InsertNextDNode(DNode *p, DNode *s)&#123;</span><br><span class="line">if(p == NULL  s == NULL)&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">if(p-&gt;next != NULL)&#123;  // 判断p是否有后继结点，如果有后继结点，则设置后继结点的前驱为s</span><br><span class="line">p-&gt;next-&gt;prior = s;</span><br><span class="line">&#125;</span><br><span class="line">s-&gt;prior = p;</span><br><span class="line">p-&gt;next = s;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除p的后继结点</span><br><span class="line">int DeleteNextDNode(DNode *p)&#123;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // p结点不存在返回1</span><br><span class="line">&#125;</span><br><span class="line">DNode *q = p-&gt;next;</span><br><span class="line">if(q == NULL)&#123;</span><br><span class="line">return 2;  // p的后继结点为空（不存在）返回2</span><br><span class="line">&#125;</span><br><span class="line">p-&gt;next = q-&gt;next;</span><br><span class="line">if(q-&gt;next != NULL)&#123;</span><br><span class="line">q-&gt;next-&gt;prior = p;</span><br><span class="line">&#125;</span><br><span class="line">free(q);</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除p结点</span><br><span class="line">int DeleteDNode(DNode *p)&#123;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // p结点不存在返回1</span><br><span class="line">&#125;</span><br><span class="line">DNode *q = p-&gt;prior;</span><br><span class="line">q-&gt;next = p-&gt;next;</span><br><span class="line">if(p-&gt;next != NULL)&#123;</span><br><span class="line">p-&gt;next-&gt;prior = q;</span><br><span class="line">&#125;</span><br><span class="line">free(p);</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 释放双链表各个数据结点（删除表）</span><br><span class="line">int DsetoryList(DLinklist &amp;L)&#123;</span><br><span class="line">while(L-&gt;next != NULL)&#123;</span><br><span class="line">DeleteNextDNode(L);</span><br><span class="line">&#125;</span><br><span class="line">free(L);</span><br><span class="line">L = NULL;</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 循环输出双链表</span><br><span class="line">int PrintList(DLinklist L)&#123;</span><br><span class="line">if(Empty(L))&#123;</span><br><span class="line">return 1;  // 链表为空输出1</span><br><span class="line">&#125;</span><br><span class="line">DNode *p = L-&gt;next;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;</span><br><span class="line">std::cout &lt;&lt; p-&gt;data &lt;&lt; &quot; &quot;;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按位查找表L的结点</span><br><span class="line">DNode *GetElem(DLinklist L, int i)&#123;</span><br><span class="line">if(i&lt;0)&#123;</span><br><span class="line">return NULL;  // 变量i大小不合法</span><br><span class="line">&#125;</span><br><span class="line">DNode *p;  // 指针p指向当前扫描到的结点</span><br><span class="line">p = L;  // L指向头结点，即第0个结点，不存放数据 </span><br><span class="line">int j = 0;  // j表指向第几个结点 </span><br><span class="line">while(p != NULL &amp;&amp; j &lt; i)&#123;  // 循环的目的是找到第i个结点并且对其操作</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 插入数据到双链表(默认表尾)</span><br><span class="line">int ListInsert(DLinklist &amp;L, int e)&#123;</span><br><span class="line"></span><br><span class="line">DNode *p = L;</span><br><span class="line">while(p-&gt;next != NULL)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">DNode *s = (DNode *)malloc(sizeof(DNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">return InsertNextDNode(p, s);  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 插入数据到双链表</span><br><span class="line">int ListInsert(DLinklist &amp;L, int e, int i)&#123;</span><br><span class="line">if(i&lt;1)&#123;</span><br><span class="line">return 1;  // 变量i大小不合法 </span><br><span class="line">&#125;</span><br><span class="line">DNode *p = GetElem(L, i-1);  // 查找到第i-1个结点的位置</span><br><span class="line">DNode *s = (DNode *)malloc(sizeof(DNode));</span><br><span class="line">s-&gt;data = e;</span><br><span class="line">return InsertNextDNode(p, s);  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按值查找单链表中的元素</span><br><span class="line">DNode *LocateElem(DLinklist L, int e)&#123;</span><br><span class="line">DNode *p = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;data != e)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">return p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除双链表中的元素</span><br><span class="line">int ListDelete(DLinklist &amp;L, int e)&#123;</span><br><span class="line">DNode *p = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;data != e)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">if(p == NULL)&#123;</span><br><span class="line">return 1;  // 变量e不存在</span><br><span class="line">&#125;</span><br><span class="line">return DeleteNextDNode(p);  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 将双链表中元素反转</span><br><span class="line">int List_Reverse(DLinklist &amp;L)&#123;</span><br><span class="line">DNode *p, *q;</span><br><span class="line">p = L-&gt;next;</span><br><span class="line">L-&gt;next = NULL;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;</span><br><span class="line">q = p-&gt;next;</span><br><span class="line">p-&gt;next = L-&gt;next;</span><br><span class="line">L-&gt;next = p;</span><br><span class="line">p = q;</span><br><span class="line">&#125;</span><br><span class="line">if(!Empty(L))&#123;</span><br><span class="line">p = L-&gt;next;</span><br><span class="line">q = L;</span><br><span class="line">while(p != NULL &amp;&amp; p-&gt;next != L)&#123;</span><br><span class="line">p-&gt;prior = q;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">q = q-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 初始化循环单链表</span><br><span class="line">int InitCircleList(LinkList &amp;L, int n)&#123;</span><br><span class="line">L = (LinkList)malloc(sizeof(LinkList));</span><br><span class="line">if(L == NULL)&#123;</span><br><span class="line">return 1;  // 分配内存失败</span><br><span class="line">&#125;</span><br><span class="line">L-&gt;next = L;  // 空链表头结点指向自身</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空</span><br><span class="line">bool CircleEmpty(LinkList L)&#123;</span><br><span class="line">return L-&gt;next == L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判尾</span><br><span class="line">bool isTail(LinkList L, LinkList p)&#123;</span><br><span class="line">return p-&gt;next == L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 初始化循环双链表</span><br><span class="line">int InitCircleDList(DLinklist &amp;L, int n)&#123;</span><br><span class="line">L = (DLinklist)malloc(sizeof(DLinklist));</span><br><span class="line">if(L == NULL)&#123;</span><br><span class="line">return 1;  // 分配内存失败</span><br><span class="line">&#125;</span><br><span class="line">L-&gt;prior = L;  // 空链表头结点指向自身</span><br><span class="line">L-&gt;next = L;  // 空链表尾结点指向自身</span><br><span class="line">return 0;  // 正常结束返回0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空</span><br><span class="line">bool CircleEmpty(DLinklist L)&#123;</span><br><span class="line">return L-&gt;prior == L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判尾</span><br><span class="line">bool isTail(DLinklist L, DLinklist p)&#123;</span><br><span class="line">return p-&gt;next == L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 静态链表</span><br><span class="line">// 声明用：Node 变量名[MAXSIZE];</span><br><span class="line">typedef struct Node &#123;  // 静态链表结点类型</span><br><span class="line">int data;  // 用于存放数据</span><br><span class="line">int next;  // 用于存放下一个结点的数组下标</span><br><span class="line">&#125;Node;</span><br><span class="line"></span><br><span class="line">// 静态链表(2)</span><br><span class="line">// 声明用：SLinkList 变量名; 创建MAXSIZE个结点的静态链表</span><br><span class="line">typedef struct&#123;</span><br><span class="line">    int data;</span><br><span class="line">    int next;</span><br><span class="line">&#125;SLinkList[MAXSIZE];</span><br><span class="line"></span><br><span class="line">// 初始化静态链表</span><br><span class="line">int InitSLinkList(SLinkList &amp;L)&#123;</span><br><span class="line">    L[0].next = -1;  // 空链表头结点数组为-1</span><br><span class="line">    // 其他的结点数组下标初始化为-2</span><br><span class="line">    for(int i=1; i&lt;MAXSIZE; i++)&#123;</span><br><span class="line">        L[i].next = -2;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 求静态链表长度</span><br><span class="line">int Length(SLinkList L)&#123;</span><br><span class="line">    int length = 0;</span><br><span class="line">    while(L[length].next != -1)&#123;</span><br><span class="line">        length++;</span><br><span class="line">    &#125;</span><br><span class="line">    return length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判空</span><br><span class="line">bool Empty(SLinkList L)&#123;</span><br><span class="line">    return L[0].next == -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判尾</span><br><span class="line">bool isTail(SLinkList L, int i)&#123;</span><br><span class="line">    return L[i].next == -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 输出静态链表</span><br><span class="line">int PrintList(SLinkList L)&#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    while(L[i].next != -1)&#123;</span><br><span class="line">i = L[i].next;</span><br><span class="line">        std::cout &lt;&lt; L[i].data &lt;&lt; &quot; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 在静态链表尾部插入元素</span><br><span class="line">int ListInsert(SLinkList &amp;L, int e)&#123;</span><br><span class="line">    // 判断静态链表是否已满</span><br><span class="line">    if(Length(L) == MAXSIZE - 1)&#123;</span><br><span class="line">        return 1;  // 静态链表已满</span><br><span class="line">    &#125;</span><br><span class="line">    int i = 0;</span><br><span class="line">    while(L[i].next != -1)&#123;</span><br><span class="line">        i = L[i].next;</span><br><span class="line">    &#125;</span><br><span class="line">    L[i].next = i + 1;</span><br><span class="line">    L[i + 1].data = e;</span><br><span class="line">    L[i + 1].next = -1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查找元素</span><br><span class="line">int GetElem(SLinkList L, int i)&#123;</span><br><span class="line">    int j = 0;</span><br><span class="line">    if(i&lt;1  i&gt;Length(L))&#123;</span><br><span class="line">        return -1;  // 变量i大小不合法</span><br><span class="line">    &#125;</span><br><span class="line">    j = L[0].next;</span><br><span class="line">    while(j != -1 &amp;&amp; i&gt;1)&#123;</span><br><span class="line">        j = L[j].next;</span><br><span class="line">        i--;</span><br><span class="line">    &#125;</span><br><span class="line">    return L[j].data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查找元素</span><br><span class="line">int LocateElem(SLinkList L, int e)&#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    int j = L[0].next;</span><br><span class="line">    while(j != -1)&#123;</span><br><span class="line">        if(L[j].data == e)&#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">        j = L[j].next;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除元素</span><br><span class="line">int ListDelete(SLinkList &amp;L, int i)&#123;</span><br><span class="line">    int j;</span><br><span class="line">    if(i&lt;1  i&gt;Length(L))&#123;</span><br><span class="line">        return 1;  // 变量i大小不合法</span><br><span class="line">    &#125;</span><br><span class="line">    if(i == 1)&#123;</span><br><span class="line">        L[0].next = L[L[0].next].next;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        j = L[0].next;</span><br><span class="line">        while(j != -1 &amp;&amp; i&gt;2)&#123;</span><br><span class="line">            j = L[j].next;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        L[j].next = L[L[j].next].next;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 弹出元素</span><br><span class="line">int ListPop(SLinkList &amp;L, int i)&#123;</span><br><span class="line">    int e;</span><br><span class="line">    if(i&lt;1  i&gt;Length(L))&#123;</span><br><span class="line">        return -1;  // 变量i大小不合法返回-1</span><br><span class="line">    &#125;</span><br><span class="line">    if(i == 1)&#123;</span><br><span class="line">        e = L[L[0].next].data;</span><br><span class="line">        L[0].next = L[L[0].next].next;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        int j = L[0].next;</span><br><span class="line">        while(j != -1 &amp;&amp; i&gt;2)&#123;</span><br><span class="line">            j = L[j].next;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        e = L[L[j].next].data;</span><br><span class="line">        L[j].next = L[L[j].next].next;</span><br><span class="line">    &#125;</span><br><span class="line">    return e;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反转静态链表</span><br><span class="line">int List_Reverse(SLinkList &amp;L)&#123;</span><br><span class="line">    int *p = new int[Length(L)];</span><br><span class="line">int length = Length(L);</span><br><span class="line">for(int i = 0; i &lt; length; i++)&#123;</span><br><span class="line">p[i] = ListPop(L, 1);</span><br><span class="line">&#125;</span><br><span class="line">for(int i = length-1; i &gt;= 0; i--)&#123;</span><br><span class="line">ListInsert(L, p[i]);</span><br><span class="line">&#125;</span><br><span class="line">delete[] p;</span><br><span class="line">return 0;  // 反转成功</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除静态链表</span><br><span class="line">int DsetoryList(SLinkList &amp;L)&#123;</span><br><span class="line">    L[0].next = -1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2022/01/15/monotone-stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2022/01/15/monotone-stack/" class="post-title-link" itemprop="url">单调栈的解释及应用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-15 01:43:03" itemprop="dateCreated datePublished" datetime="2022-01-15T01:43:03+08:00">2022-01-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="单调栈定义"><a href="#单调栈定义" class="headerlink" title="单调栈定义"></a>单调栈定义</h2><p>从名字上就听的出来，单调栈中存放的数据应该是有序的，所以单调栈也分为单调递增栈和单调递减栈</p>
<p>单调递增栈：单调递增栈就是从栈底到栈顶数据是从大到小<br>单调递减栈：单调递减栈就是从栈底到栈顶数据是从小到大</p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/lucky52529/article/details/89155694">[数据结构]——单调栈_lucky52529的博客-CSDN博客_单调递增栈</a></p>
<h2 id="定义简例"><a href="#定义简例" class="headerlink" title="定义简例"></a>定义简例</h2><p>假如有一个单调栈（单调递增）现有以下数字：7，3，5，6，10</p>
<ul>
<li>7入栈时（栈空），7入栈，栈内：7</li>
<li>3入栈时（3比7小），3入栈，栈内：7，3</li>
<li>5入栈时（5比3大，比7小），3弹栈，5入栈，栈内：7，5</li>
<li>6入栈时（6比5大，比7小），5弹栈，6入栈，栈内：7，6</li>
<li>10入栈时（10比6大，比7大），6弹栈，7弹栈，栈内：10</li>
</ul>
<h2 id="伪代码"><a href="#伪代码" class="headerlink" title="伪代码"></a>伪代码</h2><p>定义数组或者栈;<br>for (遍历原始数据数组)<br>{<br>if (栈空  栈顶元素大于等于当前比较元素)<br>{<br>入栈;<br>}<br>else<br>{<br>while (栈不为空 &amp;&amp; 栈顶元素小于当前元素)<br>{<br>栈顶元素出栈;<br>更新结果;<br>}<br>当前数据入栈;<br>}<br>}</p>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><ul>
<li>小Q在周末的时候和他的小伙伴来到大城市逛街，一条步行街上有很多高楼，共有n座高楼排成一行。小Q从第一栋一直走到了最后一栋，小Q从来都没有见到这么多的楼，所以他想知道他在每栋楼的位置处能看到多少栋楼呢？（当前面的楼的高度大于等于后面的楼时，后面的楼将被挡住）</li>
</ul>
<h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例"></a>输入样例</h3><ul>
<li>[5,3,8,3,2,5]</li>
</ul>
<h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h3><ul>
<li>[3,3,5,4,4,4]</li>
</ul>
<h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><ul>
<li>当小Q处于位置3时，他可以向前看到位置2,1处的楼，向后看到位置4,6处的楼，加上第3栋楼，共可看到5栋楼。当小Q处于位置4时，他可以向前看到位置3处的楼，向后看到位置5,6处的楼，加上第4栋楼，共可看到4栋楼。</li>
</ul>
<h3 id="函数代码（利用动态数组ArrayList模拟栈）"><a href="#函数代码（利用动态数组ArrayList模拟栈）" class="headerlink" title="函数代码（利用动态数组ArrayList模拟栈）"></a>函数代码（利用动态数组ArrayList模拟栈）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static int[] findBuilding (int[] heights) &#123;</span><br><span class="line">int[] number = new int[heights.length];</span><br><span class="line">ArrayList&lt;Integer&gt; LTR = new ArrayList&lt;Integer&gt;(); // 从大到小（从左往右从大到小）</span><br><span class="line">ArrayList&lt;Integer&gt; RTL = new ArrayList&lt;Integer&gt;(); // 从小到大（从右往左从大到小）</span><br><span class="line">for (int i = 0, j = number.length-1; i &lt; number.length; i++,j--) &#123;</span><br><span class="line">// 每次i，j游标指向的是小Q所在的房子的左边的房子或者右边的房子在内的单调栈</span><br><span class="line">// 因为第一次循环的时候是最左边的房子和最右边的房子入栈，所以要先记录左右两边单调栈里的数</span><br><span class="line">// 且最后一次循环不出现问题，LYT单调栈到最右边的时候即不出现最右边的房子为某个房子左边的房子，RTL同理</span><br><span class="line">number[i] += LTR.size();</span><br><span class="line">number[j] += RTL.size();</span><br><span class="line">while (LTR.size()&gt;0 &amp;&amp; heights[i]&gt;(int)LTR.get(LTR.size()-1)) &#123;</span><br><span class="line">LTR.remove(LTR.size()-1); // LTR出栈</span><br><span class="line">&#125;</span><br><span class="line">while (RTL.size()&gt;0 &amp;&amp; heights[j]&gt;(int)RTL.get(RTL.size()-1)) &#123;</span><br><span class="line">RTL.remove(RTL.size()-1); // RT出栈</span><br><span class="line">&#125;</span><br><span class="line">LTR.add(heights[i]); // LTR入栈</span><br><span class="line">RTL.add(heights[j]); // RTL入栈</span><br><span class="line">&#125;</span><br><span class="line">for (int i = 0; i &lt; number.length; i++) &#123;</span><br><span class="line">number[i] ++;</span><br><span class="line">&#125;</span><br><span class="line">return number;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="更换栈类型函数代码为"><a href="#更换栈类型函数代码为" class="headerlink" title="更换栈类型函数代码为"></a>更换栈类型函数代码为</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static int[] findBuilding (int[] heights) &#123;</span><br><span class="line">int[] number = new int[heights.length];</span><br><span class="line">Stack&lt;Integer&gt; LTR = new Stack&lt;&gt;(); // 从大到小（从左往右从大到小）</span><br><span class="line">Stack&lt;Integer&gt; RTL = new Stack&lt;&gt;(); // 从小到大（从右往左从大到小）</span><br><span class="line">for (int i = 0, j = number.length-1; i &lt; number.length; i++,j--) &#123;</span><br><span class="line">// 每次i，j游标指向的是小Q所在的房子的左边的房子或者右边的房子在内的单调栈</span><br><span class="line">// 因为第一次循环的时候是最左边的房子和最右边的房子入栈，所以要先记录左右两边单调栈里的数</span><br><span class="line">// 且最后一次循环不出现问题，LYT单调栈到最右边的时候即不出现最右边的房子为某个房子左边的房子，RTL同理</span><br><span class="line">number[i] += LTR.size();</span><br><span class="line">number[j] += RTL.size();</span><br><span class="line">while (!LTR.isEmpty() &amp;&amp; heights[i]&gt;LTR.peek()) &#123;</span><br><span class="line">LTR.pop(); // LTR出栈</span><br><span class="line">&#125;</span><br><span class="line">while (!RTL.isEmpty() &amp;&amp; heights[j]&gt;RTL.peek()) &#123;</span><br><span class="line">RTL.pop(); // RT出栈</span><br><span class="line">&#125;</span><br><span class="line">LTR.push(heights[i]); // LTR入栈</span><br><span class="line">RTL.push(heights[j]); // RTL入栈</span><br><span class="line">&#125;</span><br><span class="line">for (int i = 0; i &lt; number.length; i++) &#123;</span><br><span class="line">number[i] ++;</span><br><span class="line">&#125;</span><br><span class="line">return number;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="灵感来源"><a href="#灵感来源" class="headerlink" title="灵感来源"></a>灵感来源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">  </span><br><span class="line">int main() &#123;</span><br><span class="line">    int i,n,j, x[100001],LtoR[100001],RtoL[100001],sum[100001];</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">    for(i=0;i&lt;n;i++)</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;x[i]);</span><br><span class="line">    int indl=0,indr=0;</span><br><span class="line">    for(i=0,j=n-1;i&lt;n,j&gt;=0;i++,j--)&#123;</span><br><span class="line">    sum[i]+=indl;</span><br><span class="line">    sum[n-i-1]+=indr;</span><br><span class="line">//从左往右遍历（从右往左看）</span><br><span class="line">    while(LtoR[indl-1]&lt;=x[i]&amp;&amp;indl&gt;0)&#123;</span><br><span class="line">    indl --;//出栈操作</span><br><span class="line">&#125;</span><br><span class="line">//从右往左遍历（从左往右看）</span><br><span class="line">while(RtoL[indr-1]&lt;=x[j]&amp;&amp;indr&gt;0)&#123;</span><br><span class="line">    indr --;//出栈操作</span><br><span class="line">&#125;</span><br><span class="line">    LtoR[indl]=x[i];//入栈</span><br><span class="line">    indl ++;</span><br><span class="line">    RtoL[indr]=x[j];//入栈</span><br><span class="line">    indr ++;</span><br><span class="line">&#125;</span><br><span class="line">//注意加一</span><br><span class="line">for(i=0;i&lt;n-1;i++)</span><br><span class="line">printf(&quot;%d &quot;,sum[i]+1);</span><br><span class="line">printf(&quot;%d\n&quot;,sum[n-1]+1);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Twinkle_sone/article/details/104593171">逛街【 腾讯2020校园招聘-后台&amp;综合-第一次笔试】（单调栈的应用）_Twinkle_sone的博客-CSDN博客</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2021/12/31/computer-net-udp-server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/12/31/computer-net-udp-server/" class="post-title-link" itemprop="url">计算机网络小学期——UDP服务器的设计</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-31 19:51:43" itemprop="dateCreated datePublished" datetime="2021-12-31T19:51:43+08:00">2021-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>成品下载链接：<a target="_blank" rel="noopener" href="http://gitlab.zhuanjie.ltd/Randall/udp-server/-/releases">发布 · Randall Chu &#x2F; UDP服务器的设计 · GitLab (gitlab.zhuanjie.ltd)</a></p>
<h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><p>UDP是TCP&#x2F;IP协议族为传输层设计的两个协议之一，是一种无连接的，不可靠的协议。由于UDP采取了无连接的方式，因此协议简单，在一些特定的应用中协议运行效率高。UDP适合一些实时的应用，如IP电话、视频会议，它们要求源主机以恒定的速率发送数据，并且在网络出现拥塞时，可以丢失一些数据，但是延迟不能太大。基于这些特点，流式多媒体通信、多播等应用在传输层采用的就是UDP协议。编写一UDP服务器程序，流畅地完成视频文件地传输，要能对多个客户端进行管理。需要通过UDP模拟多个客户端连接验证的情况。</p>
<h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>a) 编译环境：Python3.10<br>b) 编译工具：PyCharm<br>c) 打包工具：pyinstaller</p>
<h3 id="调用函数库"><a href="#调用函数库" class="headerlink" title="调用函数库"></a>调用函数库</h3><p>a) time：处理时间的标准库，提供获取系统时间并格式化输出功能<br>b) socket：帮助在网络上的两个程序之间建立信息通道<br>c) queue：提供队列操作的模块，用于多个线程之间的数据共享<br>d) basename：去掉目录路径，单独返回文件名</p>
<h3 id="解决问题思路"><a href="#解决问题思路" class="headerlink" title="解决问题思路"></a>解决问题思路</h3><p>本程序由于需要在网络上搭建UDP服务器来传输信息、文件，则必须要定义一个合适的确认连接以及检验文件完成性的功能。<br>以TCP传输模式为样例，本程序的服务器端和客户端采用了类似TCP的三次握手确认连接和四次挥手断开连接。<br>本程序采用类似FTP传输模式，利用6000端口来传送控制信息以及一些普通消息，利用7777端口来传输文件信息，利用7778端口来接收ack数据包确认信息。<br>服务器端主进程开启接受消息线程，该线程负责接受捕获到的6000端口的UDP数据包，并将判断数据是否为连接、断开等命令数据。<br>如接收到连接指令则将信息发送方的套接字保存创建新线程负责处理该线程发送来的信息并且创建新管道方便与之通信。<br>如果是断开连接命令，则在“四次挥手”结束后结束该套接字对应的线程，释放资源。如果是其他命令，则将命令存放到信息来的套接字对应的管道中。<br>管道另一头接受到信息后开始处理对应信息。处理不同套接字的消息的进程在从套接字中取到消息后开始执行程序。如果将信息通过默认命令消息处理函数处理后返回不同对应的信息，如果服务器需要执行聊天操作，则会创建新线程调用循环发送函数给该套接字发送消息。如果服务器需要执行发送文件操作则需等待客户机发送所需要的文件目录后创建两个新线程一个负责在7777端口发送文件，另一个是负责在7778端口接收确认包。<br>客户端程序只需要获取服务器ip后主动连接服务器。在服务器相应后显示连接成功。同时启动两个线程，一个负责发送数据包，另一个负责接收数据包并处理。<br>处理数据时，如果为传输文件确认数据包，则阻塞发送数据包的线程，并把需要的文件路径发送至服务器。然后通过对接收到服务器7777端口发送来的数据进行整理，返回给服务器7778端口确认包。全部确认后文件传输完成并唤醒发送数据进程。<br>如果发送的数据为exit（断开连接命令），将状态变量改变，使得发送和接受线程全部停止，主进程等待两个线程结束后结束运行。</p>
<h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h2><p><img src="http://blog.zhuanjie.ltd/wp-content/uploads/2021/12/image-745x1024.png"></p>
<p>服务器端流程图</p>
<p><img src="http://blog.zhuanjie.ltd/wp-content/uploads/2021/12/image-1-630x1024.png"></p>
<p>客户端流程图</p>
<h2 id="详细设计-利用Python代码实现"><a href="#详细设计-利用Python代码实现" class="headerlink" title="详细设计(利用Python代码实现)"></a>详细设计(利用Python代码实现)</h2><h3 id="函数列表"><a href="#函数列表" class="headerlink" title="函数列表"></a>函数列表</h3><p>函数名</p>
<p>参数</p>
<p>描述</p>
<p>sendto</p>
<p>传输文件名称,客户端套接字</p>
<p>用于传输文件</p>
<p>recv_ack</p>
<p>无</p>
<p>确认客户端返回的确认信息</p>
<p>sendOne</p>
<p>消息,发送到的客户机的套接字</p>
<p>整合发送一条udp消息到指定套接字</p>
<p>circlesend</p>
<p>发送到的客户机的套接字</p>
<p>循环发送消息到客户端（基于聊天功能）</p>
<p>getfire</p>
<p>文件路径,发送到的客户机的套接字</p>
<p>获取文件函数，用于启动发送文件进程和确认客户端返回的确认进程</p>
<p>mafun</p>
<p>消息,发送到的客户机的套接字</p>
<p>默认命令消息处理函数</p>
<p>diviceConnect</p>
<p>发送到的客户机的套接字</p>
<p>连接到服务器后的设备所启动线程调用的函数</p>
<p>receive</p>
<p>无</p>
<p>接受消息并将消息送到管道</p>
<p>服务器端函数列表</p>
<p>函数名</p>
<p>参数</p>
<p>描述</p>
<p>getFile</p>
<p>文件名</p>
<p>获取文件路径，名称</p>
<p>receive</p>
<p>无</p>
<p>接受消息</p>
<p>circlesend</p>
<p>无</p>
<p>发送消息</p>
<p>客户端函数列表</p>
<h2 id="主要函数代码"><a href="#主要函数代码" class="headerlink" title="主要函数代码"></a>主要函数代码</h2><h3 id="服务器端主要函数"><a href="#服务器端主要函数" class="headerlink" title="服务器端主要函数"></a>服务器端主要函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"># 文件传输 占用端口7777</span><br><span class="line"># 三级子进程（父进程：设备对应进程）</span><br><span class="line"># 变量：(传输文件名称,客户端套接字)</span><br><span class="line">def sendto(fn_path, addr):</span><br><span class="line">    # 读取文件全部内容</span><br><span class="line">    with open(fn_path, &#x27;rb&#x27;) as fp:</span><br><span class="line">        content = fp.read()</span><br><span class="line">    # 获取文件大小，做好分块传输的准备</span><br><span class="line">    fn_size = len(content)</span><br><span class="line">    for start in range(fn_size // BUFFER_SIZE + 1):</span><br><span class="line">        positions.append(start * BUFFER_SIZE)</span><br><span class="line">    # 设置事件，可以启动用来接收确认信息的线程了</span><br><span class="line">    e.set()</span><br><span class="line">    # 窗口套接字，设置发送缓冲区大小</span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">    sock.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, BUFFER_SIZE)</span><br><span class="line">    # 发送文件数据，直到所有分块都收到确认，否则就不停地循环发送</span><br><span class="line">    while positions:</span><br><span class="line">        for pos in positions:</span><br><span class="line">            sock.sendto(f&#x27;&#123;pos&#125;_&#x27;.encode() + content[pos:pos + BUFFER_SIZE], (addr[0], 7777))</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line">    # 通知，发送完成</span><br><span class="line">    while file_name:</span><br><span class="line">        sock.sendto(b&#x27;over_&#x27; + file_name[0], (addr[0], 7777))</span><br><span class="line">    # 关闭套接字</span><br><span class="line">    sock.close()</span><br><span class="line"># 确认客户端返回的确认信息 占用端口7778</span><br><span class="line"># 三级子进程（父进程：设备对应进程）</span><br><span class="line"># 变量：空</span><br><span class="line">def recv_ack():</span><br><span class="line">    # 创建套接字，绑定本地端口，用来接收对方的确认信息</span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">    sock.bind((IP, 7778))</span><br><span class="line">    # 如果所有分块都确认过，就结束循环</span><br><span class="line">    while positions:</span><br><span class="line">        # 预期收到的确认包格式为1234_ack</span><br><span class="line">        data, _ = sock.recvfrom(1024)</span><br><span class="line">        pos = int(data.split(b&#x27;_&#x27;)[0])</span><br><span class="line">        if pos in positions:</span><br><span class="line">            positions.remove(pos)</span><br><span class="line">    # 确认对方收到文件名，并已接收全部数据</span><br><span class="line">    while file_name:</span><br><span class="line">        data, _ = sock.recvfrom(1024)</span><br><span class="line">        fn = data.split(b&#x27;_&#x27;)[0]</span><br><span class="line">        if fn in file_name:</span><br><span class="line">            file_name.remove(fn)</span><br><span class="line">    sock.close()</span><br><span class="line"># 整合发送一条udp消息</span><br><span class="line"># 变量：(消息,发送到的客户机的套接字)</span><br><span class="line">def sendOne(msg, addr):</span><br><span class="line">    s.sendto(msg.encode(), addr)</span><br><span class="line"># 循环发送消息到客户端（聊天功能）</span><br><span class="line"># 变量：(发送到的客户机的套接字)</span><br><span class="line">def circlesend(addr):</span><br><span class="line">    global OCCUIPED</span><br><span class="line">    while OCCUIPED:</span><br><span class="line">        send_data = input(&quot;To&quot; + str(addr) + &quot;:&quot;)</span><br><span class="line">        s.sendto(send_data.encode(), addr)</span><br><span class="line">        if send_data == &quot;exitchat&quot;:</span><br><span class="line">            OCCUIPED = False</span><br><span class="line">            break</span><br><span class="line"># 获取文件函数，用于启动发送文件进程和确认客户端返回的确认进程</span><br><span class="line"># 变量：(文件路径,发送到的客户机的套接字)</span><br><span class="line">def getfire(datapath, addr):</span><br><span class="line">    global fn_path, file_name</span><br><span class="line">    fn_path = datapath</span><br><span class="line">    file_name = [f&#x27;&#123;basename(fn_path)&#125;&#x27;.encode()]</span><br><span class="line">    t1 = threading.Thread(target=sendto, args=(fn_path, addr))</span><br><span class="line">    t1.start()</span><br><span class="line">    e.clear()</span><br><span class="line">    e.wait()</span><br><span class="line">    t2 = threading.Thread(target=recv_ack)</span><br><span class="line">    t2.start()</span><br><span class="line">    # 等待发送线程和接收确认线程都结束</span><br><span class="line">    t2.join()</span><br><span class="line">    t1.join()</span><br><span class="line"># 默认命令消息处理函数</span><br><span class="line"># 变量：(消息,发送到的客户机的套接字)</span><br><span class="line">def mafun(message, addr):</span><br><span class="line">    if message == &quot;help&quot;:</span><br><span class="line">        sendOne(&quot;\n1.返回当前服务器时间\n2.聊天\n3.文件传输\n4.关于\nexit——退出 help——帮助&quot;, addr)  # man——指令详情</span><br><span class="line">    elif message == &quot;1&quot;:</span><br><span class="line">        ticks = time.time()</span><br><span class="line">        sendOne(&quot;\n当前服务器时间戳为:&quot; + str(ticks) + &quot;\n当前服务器时间为&quot; + str(time.asctime(time.localtime(ticks))), addr)</span><br><span class="line">    elif message == &quot;2&quot;:</span><br><span class="line">        global OCCUIPED</span><br><span class="line">        if OCCUIPED != &quot;&quot;:</span><br><span class="line">            return &quot;聊天室搭建失败，聊天室被占用！&quot;</span><br><span class="line">        else:</span><br><span class="line">            OCCUIPED = str(addr)</span><br><span class="line">            tsend = threading.Thread(target=circlesend, args=(addr,))  # 开启发送消息线程</span><br><span class="line">            tsend.start()</span><br><span class="line">            sendOne(&quot;chatconfirm&quot;, addr)</span><br><span class="line">    elif message == &quot;3&quot;:</span><br><span class="line">        sendOne(&quot;transferconfirm&quot;, addr)</span><br><span class="line">        datapath = Pipe[addr].get()</span><br><span class="line">        getfire(datapath, addr)  # 调用获取文件函数</span><br><span class="line">        print(&quot;文件传输完成&quot;)</span><br><span class="line">    elif message == &quot;4&quot;:</span><br><span class="line">        sendOne(&quot;\n本程序是我的计算机网络小学期作业\n@author: 朱安杰 194020215&quot;, addr)</span><br><span class="line">    else:</span><br><span class="line">        sendOne(&quot;未知命令：&quot; + message, addr)</span><br><span class="line">def diviceConnect(addr):</span><br><span class="line">    global OCCUIPED</span><br><span class="line">    while state[addr]:</span><br><span class="line">        msg = Pipe[addr].get()</span><br><span class="line">        if OCCUIPED == str(addr):</span><br><span class="line">            if msg == &quot;exitchat&quot;:</span><br><span class="line">                OCCUIPED = &quot;&quot;</span><br><span class="line">                print(&quot;结束聊天&quot;)</span><br><span class="line">                continue</span><br><span class="line">            print(str(addr) + &quot;:&quot; + msg)</span><br><span class="line">            continue</span><br><span class="line">        mafun(msg, addr)</span><br><span class="line"># 接受消息 持续监听6000端口 二级子进程（父进程：主进程（用户进程）；子进程：各个用户设备处理信息对应的进程）</span><br><span class="line"># 接收到的消息分为两类：1.指令形消息2.内容形消息</span><br><span class="line"># 指令形式消息：根据接受到的消息和判断已经存在的设备列表分配（删除）独立进程</span><br><span class="line"># 内容形消息：根据套接字将消息发送给对应的进程（唤醒进程）</span><br><span class="line">def receive():</span><br><span class="line">    while True:</span><br><span class="line">        data, addr = s.recvfrom(BUFFER_SIZE)  # 获取消息</span><br><span class="line">        print(&quot;终端： %s:%s 数据： &quot; % addr + str(data))  # 打印获取信息</span><br><span class="line">        if data == b&quot;tryconnect&quot;:  # 对信息进行分类处理</span><br><span class="line">            ConnectedDivice.append(addr)</span><br><span class="line">            print(&quot;设备：&quot; + str(addr) + &quot; 已被发现！&quot;)</span><br><span class="line">            state[addr] = True</span><br><span class="line">            q = queue.Queue()  # 创建通信管道</span><br><span class="line">            Pipe[addr] = q  # 管道存入字典</span><br><span class="line">            tcreate = threading.Thread(target=diviceConnect, args=(addr,))  # 发现设备后创建分配进程给设备</span><br><span class="line">            tcreate.start()</span><br><span class="line">            # 创建完成后返回连接成功确认</span><br><span class="line">            s.sendto(b&quot;connectconfirm&quot;, addr)</span><br><span class="line">            s.sendto(&quot;输入help获取选项列表&quot;.encode(), addr)</span><br><span class="line">        elif data == b&quot;exit&quot;:</span><br><span class="line">            s.sendto(b&quot;exitconfirm&quot;, addr)</span><br><span class="line">            s.sendto(b&quot;over&quot;, addr)</span><br><span class="line">        elif data == b&quot;overconfirm&quot;:</span><br><span class="line">            print(&quot;设备：&quot; + str(addr) + &quot; 已主动离线！&quot;)</span><br><span class="line">            del state[addr]  # 删除字典</span><br><span class="line">            ConnectedDivice.remove(addr)  # 删除设备列表</span><br><span class="line">        else:</span><br><span class="line">            Pipe[addr].put(data.decode())</span><br></pre></td></tr></table></figure>

<h3 id="客户端程序"><a href="#客户端程序" class="headerlink" title="客户端程序"></a>客户端程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"># 获取文件路径，名称</span><br><span class="line"># 变量(文件名)</span><br><span class="line">def getFile(filename):</span><br><span class="line">    filepath, tempfilename = os.path.split(filename)</span><br><span class="line">    shotname, extension = os.path.splitext(tempfilename)</span><br><span class="line">    return filepath, shotname, extension</span><br><span class="line"># 接受消息 持续监听端口 二级子进程（父进程：主进程（用户进程））</span><br><span class="line">def receive():</span><br><span class="line">    global go</span><br><span class="line">    while True:</span><br><span class="line">        if go:</span><br><span class="line">            break</span><br><span class="line">        response, addred = s.recvfrom(1024 * 1024)</span><br><span class="line">        if response == b&quot;exitconfirm&quot;:</span><br><span class="line">            responsee, addrede = s.recvfrom(1024 * 1024)</span><br><span class="line">            if responsee == b&quot;over&quot;:</span><br><span class="line">                s.sendto(&quot;overconfirm&quot;.encode(), addr)</span><br><span class="line">                print(&quot;--------断开服务器：%s:%s--------&quot; % addr)</span><br><span class="line">                s.close()</span><br><span class="line">                go = True</span><br><span class="line">                break</span><br><span class="line">        elif response == b&quot;chatconfirm&quot;:</span><br><span class="line">            continue</span><br><span class="line">        elif response == b&quot;transferconfirm&quot;:</span><br><span class="line">            print(&quot;--------文 件 传 输--------&quot;)</span><br><span class="line">            getfirename = input(&#x27;请输入想要获取的文件:&#x27;)</span><br><span class="line">            dst = input(&#x27;请输入用来保存文件的目标位置:&#x27;)</span><br><span class="line">            s.sendto(getfirename.encode(), addr)</span><br><span class="line">            BUFFER_SIZE = 1024 * 1024</span><br><span class="line">            # 用来临时保存数据</span><br><span class="line">            data = set()</span><br><span class="line">            # 接收数据的Socket</span><br><span class="line">            sock_recv = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">            sock_recv.bind((IP, 7777))</span><br><span class="line">            # 确认反馈地址</span><br><span class="line">            ack_address = (IP, 7778)</span><br><span class="line">            sock_ack = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">            # 重复收包次数</span><br><span class="line">            repeat = 1</span><br><span class="line">            while True:</span><br><span class="line">                buffer, _ = sock_recv.recvfrom(BUFFER_SIZE)</span><br><span class="line">                # 全部接收完成,获取文件名</span><br><span class="line">                if buffer.startswith(b&#x27;over_&#x27;):</span><br><span class="line">                    fn = buffer[5:].decode()</span><br><span class="line">                    # 多确认几次文件传输结束,防止发送方丢包收不到确认</span><br><span class="line">                    for i in range(5):</span><br><span class="line">                        sock_ack.sendto(fn.encode() + b&#x27;_ack&#x27;, ack_address)</span><br><span class="line">                    break</span><br><span class="line">                # 接收带编号的文件数据,临时保存,发送确认信息</span><br><span class="line">                buffer = tuple(buffer.split(b&#x27;_&#x27;, maxsplit=1))</span><br><span class="line">                if buffer in data:</span><br><span class="line">                    repeat = repeat + 1</span><br><span class="line">                else:</span><br><span class="line">                    data.add(buffer)</span><br><span class="line">                sock_ack.sendto(buffer[0] + b&#x27;_ack&#x27;, ack_address)</span><br><span class="line">            sock_recv.close()</span><br><span class="line">            sock_ack.close()</span><br><span class="line">            print(f&#x27;重复接收数据&#123;repeat&#125;次&#x27;)</span><br><span class="line">            data = sorted(data, key=lambda item: int(item[0]))</span><br><span class="line">            with open(rf&#x27;&#123;dst&#125;/&#123;fn&#125;&#x27;, &#x27;wb&#x27;) as fp:</span><br><span class="line">                for item in data:</span><br><span class="line">                    fp.write(item[1])</span><br><span class="line">            print(&quot;传输完成&quot;)</span><br><span class="line">            q.put(1)</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;%s:%s：&quot; % addr + str(response.decode()))</span><br><span class="line"># 发送消息</span><br><span class="line">def circlesend():</span><br><span class="line">    while True:</span><br><span class="line">        send_data = input()</span><br><span class="line">        s.sendto(send_data.encode(), addr)</span><br><span class="line">        if send_data == &quot;3&quot;:</span><br><span class="line">            q.get()</span><br><span class="line">        if go:</span><br><span class="line">            break</span><br></pre></td></tr></table></figure>

<h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2><p>打开服务器和客户端后执行不同功能如图</p>
<p><img src="http://blog.zhuanjie.ltd/wp-content/uploads/2021/12/image-5.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2021/11/28/python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/11/28/python/" class="post-title-link" itemprop="url">Python大作业——北印导航系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-28 19:03:17" itemprop="dateCreated datePublished" datetime="2021-11-28T19:03:17+08:00">2021-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>项目成品下载</p>
<p><a target="_blank" rel="noopener" href="http://startpage.zhuanjie.ltd/download/bigcmap.exe">链接1（直接下载）</a></p>
<p><a target="_blank" rel="noopener" href="http://gitlab.zhuanjie.ltd/Randall/bigc-map/-/releases">链接2（发布 · Randall Chu &#x2F; 北印校园导航 · GitLab</a><a target="_blank" rel="noopener" href="http://gitlab.zhuanjie.ltd/Randall/bigc-map/-/releases">)</a></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>针对新生对校园了解的不足，帮助新生对校园中的各建筑有更加多方面的了解。同时可以对于校园工作人员优化校园工具的搬运选择最优的运输路径，提高运输的效率。通过对dijkstra算法进行编写，实现从一个顶点到其余各顶点的最短路径算法，解决的有向图中最短路径问题。主要特点是以起始点为中心向外层层扩展，直到扩展到终点为止，是一种广度优先的搜索方法。</p>
<p>程序的数据和地图利用json.dumps方法编码为json文件的方式放在云服务器上，在运行代码的时候利用json.load方法访问服务器端数据。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">import json</span><br><span class="line">import tkinter</span><br><span class="line">import turtle</span><br><span class="line">import urllib</span><br><span class="line">import urllib.request</span><br><span class="line">from collections import defaultdict</span><br><span class="line">from heapq import heappop, heappush</span><br><span class="line">from math import sqrt</span><br><span class="line">from tkinter import *</span><br><span class="line">from tkinter.ttk import Combobox</span><br><span class="line">from urllib.request import urlretrieve</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 从点str1移动到str2</span><br><span class="line">def move(str1, str2):</span><br><span class="line">    x = point[str1][0] - 953 / 2</span><br><span class="line">    y = 759 / 2 - point[str1][1]</span><br><span class="line">    a = point[str2][0] - 953 / 2</span><br><span class="line">    b = 759 / 2 - point[str2][1]</span><br><span class="line">    turtle.up()</span><br><span class="line">    turtle.goto(x, y)</span><br><span class="line">    turtle.down()</span><br><span class="line">    turtle.goto(a, b)</span><br><span class="line">    turtle.up()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 判断两点的距离</span><br><span class="line">def distence(str1, str2, paramein, pointin):</span><br><span class="line">    if [str1, str2] in paramein or [str2, str1] in paramein:</span><br><span class="line">        return sqrt((pointin[str1][1] - pointin[str2][1]) ** 2 + (pointin[str1][0] - pointin[str2][0]) ** 2)</span><br><span class="line">    elif pointin[str1][0] == pointin[str2][0]:</span><br><span class="line">        return abs(pointin[str1][1] - pointin[str2][1])</span><br><span class="line">    elif pointin[str1][1] == pointin[str2][1]:</span><br><span class="line">        return abs(pointin[str1][0] - pointin[str2][0])</span><br><span class="line">    else:</span><br><span class="line">        return 1E100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 优化后Dijkstra算法</span><br><span class="line">def dijkstra(edges, t, f):</span><br><span class="line">    g = defaultdict(list)</span><br><span class="line">    for l, r, c in edges:</span><br><span class="line">        g[l].append((c, r))</span><br><span class="line">    q, seen, mins = [(0, f, [])], set(), &#123;f: 0&#125;</span><br><span class="line">    while q:</span><br><span class="line">        (cost, v1, path) = heappop(q)</span><br><span class="line">        if v1 not in seen:</span><br><span class="line">            seen.add(v1)</span><br><span class="line">            path = [v1] + path</span><br><span class="line">            if v1 == t:</span><br><span class="line">                return cost, path</span><br><span class="line">            for c, v2 in g.get(v1, ()):</span><br><span class="line">                if v2 in seen:</span><br><span class="line">                    continue</span><br><span class="line">                prev = mins.get(v2, None)</span><br><span class="line">                next = cost + c</span><br><span class="line">                if prev is None or next &lt; prev:</span><br><span class="line">                    mins[v2] = next</span><br><span class="line">                    heappush(q, (next, v2, path))</span><br><span class="line">    return float(&quot;inf&quot;), []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def draw(value):</span><br><span class="line">    # 初始化地图</span><br><span class="line">    turtle.setup(width=953, height=759, startx=50, starty=30)</span><br><span class="line">    turtle.clear()</span><br><span class="line">    turtle.title(&quot;导航路线&quot;)</span><br><span class="line">    # 图片URL</span><br><span class="line">    url = &#x27;http://startpage.zhuanjie.ltd/json/bigc.png&#x27;</span><br><span class="line">    filename = os.path.basename(url)</span><br><span class="line">    # 判断文件是否存在，如果不存在则下载</span><br><span class="line">    if not os.path.isfile(os.path.join(&quot;./&quot;, filename)):</span><br><span class="line">        try:</span><br><span class="line">            print(&quot;地图下载中：&quot;)</span><br><span class="line">            urlretrieve(url, &#x27;./bigc.png&#x27;, schedule)</span><br><span class="line">        except os.error.HTTPError as e:</span><br><span class="line">            print(e)</span><br><span class="line">            print(&#x27;\n&#x27; + url + &#x27;下载失败！&#x27; + &#x27;\n&#x27;)</span><br><span class="line">            tkinter.messagebox.showinfo(&#x27;提示&#x27;, &#x27;下载地图失败，请重试！&#x27;)</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;\n地图下载完成！&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;地图已经存在！&quot;)</span><br><span class="line">    turtle.bgpic(&quot;bigc.png&quot;)</span><br><span class="line">    turtle.pensize(15)</span><br><span class="line">    turtle.color(&quot;#ff0000&quot;)</span><br><span class="line">    turtle.hideturtle()</span><br><span class="line">    for i in range(len(value[1]) - 1):</span><br><span class="line">        move(value[1][i], value[1][i + 1])</span><br><span class="line">    turtle.mainloop()</span><br><span class="line">    # turtle.bye()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 进度条迭代</span><br><span class="line">def progressbar(cur, total=100):</span><br><span class="line">    percent = &#x27;&#123;:.2%&#125;&#x27;.format(cur / total)</span><br><span class="line">    sys.stdout.write(&#x27;\r&#x27;)</span><br><span class="line">    sys.stdout.write(&quot;[%-100s] %s&quot; % (&#x27;=&#x27; * int(cur), percent))</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 进度条</span><br><span class="line">def schedule(blocknum, blocksize, totalsize):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    blocknum:当前已经下载的块</span><br><span class="line">    blocksize:每次传输的块大小</span><br><span class="line">    totalsize:网页文件总大小</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if totalsize == 0:</span><br><span class="line">        percent = 0</span><br><span class="line">    else:</span><br><span class="line">        percent = blocknum * blocksize / totalsize</span><br><span class="line">    if percent &gt; 1.0:</span><br><span class="line">        percent = 1.0</span><br><span class="line">    percent = percent * 100</span><br><span class="line">    progressbar(percent)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 初始化</span><br><span class="line">def init():</span><br><span class="line">    # 特殊连线点</span><br><span class="line">    parame = get_record(&#x27;http://startpage.zhuanjie.ltd/json/parame.json&#x27;)</span><br><span class="line">    # 各个点在地图上的坐标</span><br><span class="line">    pointin = get_record(&#x27;http://startpage.zhuanjie.ltd/json/point.json&#x27;)</span><br><span class="line">    # 复选框的值</span><br><span class="line">    valuesin = get_record(&#x27;http://startpage.zhuanjie.ltd/json/values.json&#x27;)</span><br><span class="line">    # 根据两点距离将相邻的两个点存入matrix</span><br><span class="line">    matrix = []</span><br><span class="line">    for i in pointin:</span><br><span class="line">        for j in pointin:</span><br><span class="line">            if distence(i, j, parame, pointin) != 0 and distence(i, j, parame, pointin) != 1E100:</span><br><span class="line">                matrix.append((i, j, distence(i, j, parame, pointin)))</span><br><span class="line">    return pointin, valuesin, matrix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 点击按钮运行部分</span><br><span class="line">def calc(a, b):</span><br><span class="line">    x = dijkstra(listview, a, b)</span><br><span class="line">    print(x)</span><br><span class="line">    try:</span><br><span class="line">        draw(x)</span><br><span class="line">    except turtle.Terminator:</span><br><span class="line">        draw(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将json文件转化为变量</span><br><span class="line">def get_record(url):</span><br><span class="line">    resp = urllib.request.urlopen(url)</span><br><span class="line">    ele_json = json.loads(resp.read())</span><br><span class="line">    return ele_json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&quot;开始初始化&quot;)</span><br><span class="line">point, values, listview = init()</span><br><span class="line">root = Tk()</span><br><span class="line">root.title(&#x27;北京印刷学院导航系统&#x27;)</span><br><span class="line">root.geometry(&#x27;320x50&#x27;)</span><br><span class="line">var1 = StringVar()</span><br><span class="line">var2 = StringVar()</span><br><span class="line">comb1 = Combobox(root, textvariable=var1, values=values, state=&#x27;readonly&#x27;)</span><br><span class="line">comb2 = Combobox(root, textvariable=var2, values=values, state=&#x27;readonly&#x27;)</span><br><span class="line">comb1.place(relx=0.1, rely=0.25, relwidth=0.2)</span><br><span class="line">comb2.place(relx=0.4, rely=0.25, relwidth=0.2)</span><br><span class="line">btn = Button(root, text=&quot;导航&quot;, command=lambda: calc(comb1.get(), comb2.get()))</span><br><span class="line">btn.place(relx=0.7, rely=0.25, relwidth=0.2)</span><br><span class="line">root.mainloop()</span><br></pre></td></tr></table></figure>

<h2 id="项目截图"><a href="#项目截图" class="headerlink" title="项目截图"></a>项目截图</h2><p><img src="http://blog.zhuanjie.ltd/wp-content/uploads/2021/11/image.png"></p>
<p><img src="http://blog.zhuanjie.ltd/wp-content/uploads/2021/11/image-1.png"></p>
<p>地图</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2021/11/12/python-tqdm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/11/12/python-tqdm/" class="post-title-link" itemprop="url">Python tqdm进度条</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-12 18:20:05" itemprop="dateCreated datePublished" datetime="2021-11-12T18:20:05+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="tqdm包"><a href="#tqdm包" class="headerlink" title="tqdm包"></a>tqdm包</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from tqdm import tqdm</span><br></pre></td></tr></table></figure>

<h2 id="创建tqdm"><a href="#创建tqdm" class="headerlink" title="创建tqdm"></a>创建tqdm</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pbar = tqdm(range(1000))  # 创建进度条</span><br><span class="line">for i in pbar:  # 在进度条中运行</span><br><span class="line">    continue</span><br></pre></td></tr></table></figure>

<h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">iterable=None,     可迭代的对象, 在手动更新时不需要进行设置</span><br><span class="line">desc=None,      传入str类型，作为进度条标题（类似于说明）</span><br><span class="line">total=None,     预期的迭代次数（即进度条100的时候迭代的次数）</span><br><span class="line">leave=True,     bool值, 迭代完成后是否保留进度条</span><br><span class="line">file=None,      输出指向位置, 默认是终端, 一般不需要设置</span><br><span class="line">ncols=None,     调整进度条宽度, 默认是根据环境自动调节长度, 如果设置为0, 就没有进度条, 只有输出的信息</span><br><span class="line">mininterval=0.1,    最小的更新间隔</span><br><span class="line">maxinterval=10.0,   最大更新间隔</span><br><span class="line">miniters=None, </span><br><span class="line">ascii=None, </span><br><span class="line">unit=&#x27;it&#x27;,    描述处理项目的文字, 默认是&#x27;it&#x27;, 例如: 100 it/s, 处理照片的话设置为&#x27;img&#x27; ,则为 100 img/s</span><br><span class="line">unit_scale=False,    自动根据国际标准进行项目处理速度单位的换算, 例如 100000 it/s &gt;&gt; 100k it/s</span><br><span class="line">dynamic_ncols=False, </span><br><span class="line">smoothing=0.3,</span><br><span class="line">bar_format=None, </span><br><span class="line">initial=0, </span><br><span class="line">position=None, </span><br><span class="line">postfix=dict             以字典形式传入详细信息</span><br></pre></td></tr></table></figure>

<h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from time import sleep</span><br><span class="line">from tqdm import tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for i in tqdm(range(1000)):</span><br><span class="line">    sleep(0.01)</span><br><span class="line">    # print(i)</span><br><span class="line"></span><br><span class="line">pbar = tqdm(range(1000))  # 进度条</span><br><span class="line">for i in pbar:</span><br><span class="line">    err = &#x27;abc&#x27;</span><br><span class="line">    pbar.set_description(&quot;Reconstruction loss: %s&quot; % err)</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&quot;a&quot;: 123, &quot;b&quot;: 456&#125;</span><br><span class="line">for i in tqdm(range(1000), total=1000, desc=&quot;进度条&quot;, ncols=100, postfix=dict1, mininterval=0.3):</span><br><span class="line">    sleep(0.01)</span><br><span class="line"></span><br><span class="line">with tqdm(total=21, desc=&#x27;Example&#x27;, leave=True, ncols=100, unit=&#x27;B&#x27;, unit_scale=True) as pbar1:</span><br><span class="line">    for i in range(7):</span><br><span class="line">        sleep(0.5)  # 发呆0.5秒</span><br><span class="line">        pbar1.update(3)  # 更新发呆进度，每次更新3个迭代次数</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\zhuan\PycharmProjects\test\venv\Scripts\python.exe C:/Users/zhuan/PycharmProjects/test/进度条.py</span><br><span class="line">100%██████████ 1000/1000 [00:15&lt;00:00, 63.72it/s]</span><br><span class="line">Reconstruction loss: abc: 100%██████████ 1000/1000 [00:00&lt;00:00, 3422.53it/s]</span><br><span class="line">进度条: 100%█████████████████████████████████████ 1000/1000 [00:15&lt;00:00, 63.53it/s, a=123, b=456]</span><br><span class="line">Example: 100%████████████████████████████████████████████████████ 21.0/21.0 [00:03&lt;00:00, 5.89B/s]</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuanjier.github.io/blog/2021/11/11/linux-c-communcation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="转接">
      <meta itemprop="description" content="转接的博客备用站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="转接的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/11/11/linux-c-communcation/" class="post-title-link" itemprop="url">Linux下C语言进程间通信——创建共享区</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-11 23:49:19" itemprop="dateCreated datePublished" datetime="2021-11-11T23:49:19+08:00">2021-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-10 14:37:47" itemprop="dateModified" datetime="2022-07-10T14:37:47+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/C/" itemprop="url" rel="index"><span itemprop="name">C</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>与信号量一样，在Linux中也提供了一组函数接口用于使用共享内存，而且使用共享共存的接口还与信号量的非常相似，而且比使用信号量的接口来得简单。它们声明在头文件 sys&#x2F;shm.h 中。</p>
<h2 id="shmget-函数"><a href="#shmget-函数" class="headerlink" title="shmget()函数"></a><strong>shmget()函数</strong></h2><p>int shmget(key_t key, size_t size, int shmflg);</p>
<p>第一个参数为共享内存段命名，需要提供一个参数key（非0整数），shmget()函数成功时返回一个与key相关的共享内存标识符（非负整数），用于后续的共享内存函数。调用<strong>失败返回-1</strong>。设置<strong>参数为IPC_PRIVATE时，每次都创建新的共享区</strong>，通常在父进程创建，子进程获取共享区内容。参数为数值时候，会创建固定共享区。</p>
<p>第二个参数，size以字节为单位指定需要共享的内存容量</p>
<p>第三个参数，shmflg是权限标志，它的作用与open函数的mode参数一样，如果要想在key标识的共享内存不存在时，创建它的话，可以与IPC_CREAT做或操作。共享内存的权限标志与文件的读写权限一样，举例来说，0644,它表示允许一个进程创建的共享内存被内存创建者所拥有的进程向共享内存读取和写入数据，同时其他用户创建的进程只能读取共享内存。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-rw------- (600)    只有拥有者有读写权限。</span><br><span class="line">-rw-r--r-- (644)    只有拥有者有读写权限；而属组用户和其他用户只有读权限。</span><br><span class="line">-rwx------ (700)    只有拥有者有读、写、执行权限。</span><br><span class="line">-rwxr-xr-x (755)    拥有者有读、写、执行权限；而属组用户和其他用户只有读、执行权限。</span><br><span class="line">-rwx--x--x (711)    拥有者有读、写、执行权限；而属组用户和其他用户只有执行权限。</span><br><span class="line">-rw-rw-rw- (666)    所有用户都有文件读、写权限。</span><br><span class="line">-rwxrwxrwx (777)    所有用户都有读、写、执行权限。</span><br></pre></td></tr></table></figure>

<h2 id="shmat-函数-–-at：attach"><a href="#shmat-函数-–-at：attach" class="headerlink" title="shmat()函数    – at：attach"></a><strong>shmat()函数    – at：attach</strong></h2><p>void *shmat(int shm_id, const void *shm_addr, int shmflg);</p>
<p>第一次创建完共享内存时，它还不能被任何进程访问，shmat()函数的作用就是用来启动对该共享内存的访问，并把共享内存连接到当前进程的地址空间。</p>
<p>第一个参数，shm_id是由shmget()函数返回的共享内存标识。</p>
<p>第二个参数，shm_addr指定共享内存连接到当前进程中的地址位置，通常为空，表示让系统来选择共享内存的地址。</p>
<p>第三个参数，shm_flg是一组标志位，通常为0。</p>
<p>调用成功时返回一个指向共享内存第一个字节的指针，如果调用失败返回-1。</p>
<h2 id="shmdt-函数-–-dt：detach"><a href="#shmdt-函数-–-dt：detach" class="headerlink" title="shmdt()函数    – dt：detach"></a><strong>shmdt()函数    – dt：detach</strong></h2><p>int shmdt(const void *shmaddr);</p>
<p>该函数用于将共享内存从当前进程中分离。注意，将共享内存分离并不是删除它，只是使该共享内存对当前进程不再可用。</p>
<p>参数shmaddr是shmat()函数返回的地址指针，调用成功时返回0，失败时返回-1。</p>
<h2 id="shmctl-函数-–-ctl：control"><a href="#shmctl-函数-–-ctl：control" class="headerlink" title="shmctl()函数    – ctl：control"></a><strong>shmctl()函数    – ctl：control</strong></h2><p>int shmctl(int shm_id, int command, struct shmid_ds *buf);</p>
<p>与信号量的semctl()函数一样，用来控制共享内存。</p>
<p>第一个参数，shm_id是shmget()函数返回的共享内存标识符。</p>
<p>第二个参数，command是要采取的操作，它可以取下面的三个值 ：</p>
<ol>
<li>IPC_STAT：把shmid_ds结构中的数据设置为共享内存的当前关联值，即用共享内存的当前关联值覆盖shmid_ds的值。</li>
<li>IPC_SET：如果进程有足够的权限，就把共享内存的当前关联值设置为shmid_ds结构中给出的值</li>
<li>IPC_RMID：删除共享内存段</li>
</ol>
<p>第三个参数，buf是一个结构指针，它指向共享内存模式和访问权限的结构。</p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h3 id="题目1：父子进程之间数据交流"><a href="#题目1：父子进程之间数据交流" class="headerlink" title="题目1：父子进程之间数据交流"></a>题目1：父子进程之间数据交流</h3><p>创建子进程输入字符串到共享区，在子进程输入end后进入父进程输出共享区内容</p>
<p>代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;sys/shm.h&gt;</span><br><span class="line">#include &lt;sys/wait.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int shmid;</span><br><span class="line">    char *p, *q;</span><br><span class="line">    char buffer[BUFSIZ];</span><br><span class="line">    int pid;</span><br><span class="line">    // 创建共享区</span><br><span class="line">    shmid=shmget(IPC_PRIVATE,128,IPC_CREAT  0666); // 成功创建值&gt;0</span><br><span class="line">    if(shmid &lt;0)&#123; // 创建失败为-1</span><br><span class="line">        printf(&quot;创建共享内存失败\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;创建共享内存成功 shmid=%d\n&quot;,shmid);</span><br><span class="line">    pid=fork();//创建进程pid</span><br><span class="line">    if(pid==0)&#123;//这是子进程</span><br><span class="line">        // 绑定地址p到共享区</span><br><span class="line">        p=(char *)shmat(shmid,0,0);</span><br><span class="line">        if(p==NULL)&#123;</span><br><span class="line">            printf(&quot;子进程映射失败\n&quot;);</span><br><span class="line">            return -2;</span><br><span class="line">        &#125;</span><br><span class="line">        while(1)&#123;</span><br><span class="line">            printf(&quot;子进程：写入信息：&quot;);</span><br><span class="line">            fgets(buffer,128,stdin);</span><br><span class="line">            strcat(p,buffer); </span><br><span class="line">            if(strncmp(buffer,&quot;end&quot;,3)==0)&#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        shmdt(p);</span><br><span class="line">        exit(0);</span><br><span class="line">    &#125;else if(pid &gt; 0)&#123;// 父进程</span><br><span class="line">        wait(0);</span><br><span class="line">        q=(char *)shmat(shmid,0,0);</span><br><span class="line">        if(q==NULL)&#123;</span><br><span class="line">            printf(&quot;父进程映射失败\n&quot;);</span><br><span class="line">            return -3;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;父进程：读取数据：\n%s&quot;,q);</span><br><span class="line">        shmdt(q);</span><br><span class="line">    &#125;</span><br><span class="line">    // 删除共享区</span><br><span class="line">    shmctl(shmid,IPC_RMID,NULL);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">randall@ubuntu:~/Desktop/experiment5$ ./E5-3-2.out</span><br><span class="line">创建共享内存成功 shmid=29</span><br><span class="line">子进程：写入信息：1</span><br><span class="line">子进程：写入信息：2</span><br><span class="line">子进程：写入信息：3</span><br><span class="line">子进程：写入信息：randall</span><br><span class="line">子进程：写入信息：end</span><br><span class="line">父进程：读取数据：</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">randall</span><br><span class="line">end</span><br><span class="line">randall@ubuntu:~/Desktop/experiment5$ </span><br></pre></td></tr></table></figure>

<h3 id="题目2：两个程序之间数据交流"><a href="#题目2：两个程序之间数据交流" class="headerlink" title="题目2：两个程序之间数据交流"></a>题目2：两个程序之间数据交流</h3><p>在程序shmsnd.c创建共享区然后输入字符串到共享区，再在shmrcv.c输出共享区内容</p>
<h4 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h4><h5 id="shmsnd-c"><a href="#shmsnd-c" class="headerlink" title="shmsnd.c"></a><strong>shmsnd.c</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;sys/shm.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int shmid;</span><br><span class="line">    char *p;</span><br><span class="line">    char buffer[BUFSIZ];</span><br><span class="line">    shmid=shmget(1234,BUFSIZ,IPC_CREAT  0666);</span><br><span class="line">    if(shmid &lt;0)&#123;</span><br><span class="line">        printf(&quot;创建共享内存失败\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;创建共享内存成功 shmid=%d\n&quot;,shmid);</span><br><span class="line">    p=(char *)shmat(shmid,0,0);</span><br><span class="line">    if(p==NULL)&#123;</span><br><span class="line">        printf(&quot;shmsnd映射失败\n&quot;);</span><br><span class="line">        return -2;</span><br><span class="line">    &#125;</span><br><span class="line">    while(1)&#123;</span><br><span class="line">        printf(&quot;写入信息：&quot;);</span><br><span class="line">        fgets(buffer,BUFSIZ,stdin);</span><br><span class="line">        strcat(p,buffer); </span><br><span class="line">        if(strncmp(buffer,&quot;end&quot;,3)==0)&#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    shmdt(p);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="shmrcv-c"><a href="#shmrcv-c" class="headerlink" title="shmrcv.c"></a>shmrcv.c</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;sys/shm.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int shmid;</span><br><span class="line">    char *q;</span><br><span class="line">    shmid=shmget(1234,BUFSIZ,IPC_CREAT  0644);</span><br><span class="line">    if(shmid &lt;0)&#123;</span><br><span class="line">        printf(&quot;创建共享内存失败\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;创建共享内存成功 shmid=%d\n&quot;,shmid);</span><br><span class="line">    q=(char *)shmat(shmid,NULL,0);</span><br><span class="line">    if(q==NULL)&#123;</span><br><span class="line">        printf(&quot;shmrcv映射失败\n&quot;);</span><br><span class="line">        return -3;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;读取共享区数据:\n%s&quot;,q);</span><br><span class="line">    shmdt(q);</span><br><span class="line">    shmctl(shmid,IPC_RMID,NULL);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出："><a href="#输出：" class="headerlink" title="输出："></a>输出：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">randall@ubuntu:~/Desktop/experiment5$ ./shmsnd.out</span><br><span class="line">写入信息：1 2 3 4 5</span><br><span class="line">写入信息：randall</span><br><span class="line">写入信息：end</span><br><span class="line">randall@ubuntu:~/Desktop/experiment5$ ./shmrcv.out</span><br><span class="line">读取共享区数据:</span><br><span class="line">1 2 3 4 5</span><br><span class="line">randall</span><br><span class="line">end</span><br><span class="line">randall@ubuntu:~/Desktop/experiment5$ </span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/blog/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/6/">6</a><a class="extend next" rel="next" href="/blog/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">转接</p>
  <div class="site-description" itemprop="description">转接的博客备用站点</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">转接</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
